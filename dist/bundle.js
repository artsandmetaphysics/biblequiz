!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);n(1);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,c=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var s=["Genesis","Exodus","Leviticus","Numbers","Deuteronomy"],f=[50,40,27,36,34];function m(){var e=y(PENTATEUCH.length),t=PENTATEUCH[e].chapters,n=y(t.length);return[e+1,n+1,y(t[n].verses.length)+1]}function h(e){var t,n,r;if(3===e.length){var o=u(e,3);return t=o[0],n=o[1],r=o[2],p(t)+" "+n+"."+r}if(2===e.length){var c=u(e,2);return t=c[0],n=c[1],p(t)+" "+n}}function p(e){return s[e-1]}function y(e){return Math.floor(Math.random()*Math.floor(e))}function b(e,t,n){var r=0,o=u(n,3),c=o[0],a=o[1];o[2];if(e===c){r+=10;var l=Math.abs(t-a);0===l?r+=90:l<=5&&(r+=60-10*l)}return r}function v(e){var t=u(e,3),n=t[0],r=t[1],o=t[2],c=PENTATEUCH[n-1].chapters[r-1].verses[o-1];return void 0===c?null:c[String(o)]}var E=function(e){function t(e){var n,o,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(c=a(t).call(this,e))||"object"!==r(c)&&"function"!=typeof c?l(o):c).state={score:0,questionNum:0,verse:m(),bookChoice:null,chapterChoice:null,history:S(),showHistory:!1},n.pickBook=n.pickBook.bind(l(n)),n.undoBookChoice=n.undoBookChoice.bind(l(n)),n.pickChapter=n.pickChapter.bind(l(n)),n.nextQuestion=n.nextQuestion.bind(l(n)),n.nextQuiz=n.nextQuiz.bind(l(n)),n}var n,u,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(t,React.Component),n=t,(u=[{key:"pickBook",value:function(e){this.setState({bookChoice:e})}},{key:"undoBookChoice",value:function(){this.setState({bookChoice:null})}},{key:"pickChapter",value:function(e){this.setState(function(t){var n=b(t.bookChoice,e,t.verse);return{chapterChoice:e,questionNum:t.questionNum+1,score:t.score+n}})}},{key:"nextQuestion",value:function(){this.setState(function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}({},e,{verse:m(),bookChoice:null,chapterChoice:null});if(1===e.questionNum){var n=function(e){var t=(new Date).toLocaleString(),n=S(),r={dateTimeString:t,score:e};return n.push(r),o="history",c=n,localStorage.setItem(o,JSON.stringify(c)),r;var o,c}(e.score);t.history.push(n),t.score=0,t.questionNum=0,t.showHistory=!0}return t})}},{key:"nextQuiz",value:function(){this.setState({showHistory:!1})}},{key:"render",value:function(){var e,t,n=this.state,r=n.score,o=n.questionNum,c=n.verse,a=n.bookChoice,l=n.chapterChoice,i=n.showHistory,u=n.history;return i?e=this.nextQuiz:null===a?(e=this.pickBook,t=!1):null===l?(e=this.pickChapter,t=!1):(e=this.nextQuestion,t=!0),React.createElement("div",{className:"app"},React.createElement(d,{score:r,questionNum:o,questionsPerQuiz:1}),i?React.createElement(C,{history:u}):React.createElement(R,{showAnswer:t,verse:c,bookChoice:a,chapterChoice:l}),React.createElement(N,{bookChoice:a,chapterChoice:l,onClick:e,goBack:this.undoBookChoice,showHistory:i}))}}])&&c(n.prototype,u),s&&c(n,s),t}();function d(e){var t=e.score,n=e.questionNum,r=e.questionsPerQuiz;return React.createElement("div",{className:"header"},React.createElement("h2",null,"Pentateuch Quiz"),React.createElement("h2",{className:"glow"},"SCORE: ",t),React.createElement("h2",{className:"glow"},n,"/",r))}function R(e){var t=e.showAnswer,n=e.verse,r=e.bookChoice,o=e.chapterChoice;if(t){var c,a=h([r,o]),l=b(r,o,n);return c=n[0]===r&&n[1]===o?React.createElement("p",{className:"body__correct"},"CORRECT!",React.createElement("br",null),"+",l," points!"):n[0]===r?React.createElement("p",{className:"body__close"},"Close, you chose ",a,".",React.createElement("br",null),"+",l," points"):React.createElement("p",{className:"body__wrong"},"Wrong, you chose ",a),React.createElement("div",{className:"body"},React.createElement("h2",null,h(n)),React.createElement(k,{verseArray:n}),c)}return React.createElement("div",{className:"body"},React.createElement(k,{verseArray:n}))}function C(e){var t=function(e,t){return t.score-e.score},n=e.history.slice(),r=n.pop();n.sort(t);var o=n.slice(0,9);return o.push(r),o.sort(t),React.createElement("div",{className:"body"},React.createElement("p",null,"Thank you for playing!"),React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null),React.createElement("th",null,"Score"),React.createElement("th",null,"Date"))),React.createElement("tbody",null,o.map(function(e,t){return React.createElement("tr",{key:t,style:(n=e,n.dateTimeString===r.dateTimeString?{color:"#23BD98"}:{})},React.createElement("td",null,t+1),React.createElement("td",{style:{textAlign:"right"}},e.score),React.createElement("td",null,e.dateTimeString));var n}))),React.createElement("p",null,React.createElement("a",{href:"mailto:artsandmetaphysics@gmail.com"},"Contact Creator")))}function k(e){var t=e.verseArray,n=function(e){var t=u(e,3),n=t[0],r=t[1],o=t[2];return 1===o?null:v([n,r,o-1])}(t),r=v(t),o=function(e){var t=u(e,3),n=t[0],r=t[1],o=t[2];return v([n,r,o+1])||null}(t);return React.createElement("p",null,n?React.createElement("span",{className:"body__context"},n+" "):null,React.createElement("span",null,r),o?React.createElement("span",{className:"body__context"}," "+o):null)}var g=["#EC6B34","#3C64DC","#55AEEE","#AE9BFB","#F59A2F"];function N(e){var t=e.bookChoice,n=e.chapterChoice,r=e.onClick,o=e.goBack;if(e.showHistory)return React.createElement("div",{className:"footer"},React.createElement(w,{color:"#5D4DC3",onClick:r},"Start New Quiz"));if(null===t)return React.createElement("div",{className:"footer"},React.createElement("p",{className:"footer__help"},"Which book is this verse from?"),React.createElement(w,{color:g[0],onClick:function(){return r(1)}},"Genesis"),React.createElement(w,{color:g[1],onClick:function(){return r(2)}},"Exodus"),React.createElement(w,{color:g[2],onClick:function(){return r(3)}},"Leviticus"),React.createElement(w,{color:g[3],onClick:function(){return r(4)}},"Numbers"),React.createElement(w,{color:g[4],onClick:function(){return r(5)}},"Deut."));if(null===n){var c=f[t-1],a=Array.apply(null,{length:c}).map(Number.call,Number),l=g[t-1];return React.createElement("div",{className:"footer"},React.createElement("p",{className:"footer__help"},"And which chapter?"),a.map(function(e){return React.createElement(w,{color:l,key:e,onClick:function(){return r(e+1)}},e+1)}),React.createElement(w,{color:"#999",onClick:o},"Back"))}return React.createElement("div",{className:"footer"},React.createElement(w,{color:"#5D4DC3",onClick:r},"Next Question"))}function w(e){var t=e.children,n=e.onClick,r=e.color;return React.createElement("div",{style:{backgroundColor:r},className:"button",onClick:n},t)}function S(){var e=function(e,t){try{return JSON.parse(localStorage.getItem("history"))}catch(e){return null}}();return null===e&&(e=[]),e}ReactDOM.render(React.createElement(E,{name:"Taylor"}),document.getElementById("app"))},function(e,t,n){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiQk9PS1MiLCJDSEFQVEVSU19QRVJfQk9PSyIsImdldFJhbmRvbVZlcnNlIiwiYm9va0luZGV4IiwiZ2V0UmFuZG9tSW50IiwiUEVOVEFURVVDSCIsImxlbmd0aCIsImNoYXB0ZXJzIiwiY2hhcHRlckluZGV4IiwidmVyc2VzIiwidmVyc2VUb0xhYmVsIiwidmVyc2VBcnJheSIsImJvb2tOdW0iLCJjaGFwdGVyIiwidmVyc2UiLCJfdmVyc2VBcnJheSIsIl9zbGljZWRUb0FycmF5IiwiYm9va051bVRvTGFiZWwiLCJfdmVyc2VBcnJheTIiLCJtYXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJnZXRQb2ludHMiLCJib29rQ2hvaWNlIiwiY2hhcHRlckNob2ljZSIsImFuc3dlclZlcnNlQXJyYXkiLCJwb2ludHMiLCJfYW5zd2VyVmVyc2VBcnJheSIsImJvb2tBbnN3ZXIiLCJjaGFwdGVyQW5zd2VyIiwiY2hhcHRlcnNPZmYiLCJhYnMiLCJnZXRWZXJzZVRleHQiLCJfdmVyc2VBcnJheTMiLCJjaGFwdGVyTnVtIiwidmVyc2VOdW0iLCJ1bmRlZmluZWQiLCJTdHJpbmciLCJBcHAiLCJwcm9wcyIsIl90aGlzIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9nZXRQcm90b3R5cGVPZiIsInN0YXRlIiwic2NvcmUiLCJxdWVzdGlvbk51bSIsImhpc3RvcnkiLCJsb2FkSGlzdG9yeSIsInNob3dIaXN0b3J5IiwicGlja0Jvb2siLCJfYXNzZXJ0VGhpc0luaXRpYWxpemVkIiwidW5kb0Jvb2tDaG9pY2UiLCJwaWNrQ2hhcHRlciIsIm5leHRRdWVzdGlvbiIsIm5leHRRdWl6IiwiUmVhY3QiLCJDb21wb25lbnQiLCJzZXRTdGF0ZSIsIm5ld1N0YXRlIiwiX29iamVjdFNwcmVhZCIsImRhdGFQb2ludCIsImRhdGVUaW1lU3RyaW5nIiwiRGF0ZSIsInRvTG9jYWxlU3RyaW5nIiwic2NvcmVzIiwicHVzaCIsImRhdGEiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlY29yZEhpc3RvcmljYWxTY29yZSIsIm9uQ2xpY2siLCJzaG93QW5zd2VyIiwiX3RoaXMkc3RhdGUiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiSGVhZGVyIiwicXVlc3Rpb25zUGVyUXVpeiIsIlNjb3JlQm9keSIsIkJvZHkiLCJGb290ZXIiLCJnb0JhY2siLCJfcmVmIiwiX3JlZjIiLCJyZXN1bHRMYWJlbCIsImNob2ljZSIsIlZlcnNlcyIsIl9yZWYzIiwiYnlTY29yZSIsImEiLCJiIiwicHJldmlvdXNTY29yZXMiLCJzbGljZSIsImN1cnJlbnQiLCJwb3AiLCJzb3J0IiwidG9wVGVuIiwibWFwIiwiaXRlbSIsInN0eWxlIiwiY29sb3IiLCJ0ZXh0QWxpZ24iLCJocmVmIiwiX3JlZjQiLCJwcmV2VmVyc2VUZXh0IiwiX3ZlcnNlQXJyYXk0IiwiZ2V0UHJldlZlcnNlIiwidmVyc2VUZXh0IiwibmV4dFZlcnNlVGV4dCIsIl92ZXJzZUFycmF5NSIsImdldE5leHRWZXJzZSIsIkJPT0tfQ09MT1JTIiwiX3JlZjUiLCJCdG4iLCJudW1DaGFwdGVycyIsIkFycmF5IiwiYXBwbHkiLCJOdW1iZXIiLCJfcmVmNiIsImNoaWxkcmVuIiwiYmFja2dyb3VuZENvbG9yIiwicGFyc2UiLCJnZXRJdGVtIiwiX3VudXNlZCIsImxvY2FsTG9hZCIsIlJlYWN0RE9NIiwicmVuZGVyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLFlBQUEsQ0FBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FYLE9BQUFDLGVBQUFVLEVBQUEsV0FBeUNULFlBQUEsRUFBQUssVUFDekMsRUFBQUUsR0FBQSxpQkFBQUYs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LyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9kaXN0L1wiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgXCIuL2luZGV4LnNjc3NcIjtcblxuY29uc3QgUVVFU1RJT05TX1BFUl9RVUlaID0gMTtcblxuY29uc3QgQk9PS1MgPSBbJ0dlbmVzaXMnLCAnRXhvZHVzJywgJ0xldml0aWN1cycsICdOdW1iZXJzJywgJ0RldXRlcm9ub215J107XG5cbmNvbnN0IENIQVBURVJTX1BFUl9CT09LID0gWzUwLCA0MCwgMjcsIDM2LCAzNF07XG5cbmZ1bmN0aW9uIGdldFJhbmRvbVZlcnNlKCkge1xuICAgIC8vIFRPRE86IHJldmlldyB0byBtYWtlIHN1cmUgd2UgZG9uJ3QgaGF2ZSBvZmYtYnktb25lIGVycm9yc1xuICAgIGNvbnN0IGJvb2tJbmRleCA9IGdldFJhbmRvbUludChQRU5UQVRFVUNILmxlbmd0aCk7XG4gICAgY29uc3QgY2hhcHRlcnMgPSBQRU5UQVRFVUNIW2Jvb2tJbmRleF0uY2hhcHRlcnM7XG4gICAgY29uc3QgY2hhcHRlckluZGV4ID0gZ2V0UmFuZG9tSW50KGNoYXB0ZXJzLmxlbmd0aCk7XG4gICAgY29uc3QgdmVyc2VzID0gY2hhcHRlcnNbY2hhcHRlckluZGV4XS52ZXJzZXM7XG4gICAgY29uc3QgdmVyc2VJbmRleCA9IGdldFJhbmRvbUludCh2ZXJzZXMubGVuZ3RoKVxuICAgIHJldHVybiBbYm9va0luZGV4ICsgMSwgY2hhcHRlckluZGV4ICsgMSwgdmVyc2VJbmRleCArIDFdXG59XG5cbmZ1bmN0aW9uIHZlcnNlVG9MYWJlbCh2ZXJzZUFycmF5KSB7XG4gICAgbGV0IGJvb2tOdW0sIGNoYXB0ZXIsIHZlcnNlO1xuICAgIGlmICh2ZXJzZUFycmF5Lmxlbmd0aCA9PT0gMykge1xuICAgICAgICBbYm9va051bSwgY2hhcHRlciwgdmVyc2VdID0gdmVyc2VBcnJheTtcbiAgICAgICAgcmV0dXJuIGJvb2tOdW1Ub0xhYmVsKGJvb2tOdW0pICsgJyAnICsgY2hhcHRlciArICcuJyArIHZlcnNlO1xuICAgIH0gZWxzZSBpZiAodmVyc2VBcnJheS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgW2Jvb2tOdW0sIGNoYXB0ZXJdID0gdmVyc2VBcnJheTtcbiAgICAgICAgcmV0dXJuIGJvb2tOdW1Ub0xhYmVsKGJvb2tOdW0pICsgJyAnICsgY2hhcHRlcjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGJvb2tOdW1Ub0xhYmVsKGJvb2tOdW0pIHtcbiAgICByZXR1cm4gQk9PS1NbYm9va051bSAtIDFdO1xufVxuXG5mdW5jdGlvbiBnZXRSYW5kb21JbnQobWF4KSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIE1hdGguZmxvb3IobWF4KSk7XG59XG5cbmZ1bmN0aW9uIGdldFBvaW50cyhib29rQ2hvaWNlLCBjaGFwdGVyQ2hvaWNlLCBhbnN3ZXJWZXJzZUFycmF5KSB7XG4gICAgbGV0IHBvaW50cyA9IDA7XG4gICAgY29uc3QgW2Jvb2tBbnN3ZXIsIGNoYXB0ZXJBbnN3ZXIsIF9dID0gYW5zd2VyVmVyc2VBcnJheTtcbiAgICBpZiAoYm9va0Nob2ljZSA9PT0gYm9va0Fuc3dlcikge1xuICAgICAgICBwb2ludHMgKz0gMTA7XG4gICAgICAgIGNvbnN0IGNoYXB0ZXJzT2ZmID0gTWF0aC5hYnMoY2hhcHRlckNob2ljZSAtIGNoYXB0ZXJBbnN3ZXIpO1xuICAgICAgICBpZiAoY2hhcHRlcnNPZmYgPT09IDApIHtcbiAgICAgICAgICAgIHBvaW50cyArPSA5MDtcbiAgICAgICAgfSBlbHNlIGlmIChjaGFwdGVyc09mZiA8PSA1KSB7XG4gICAgICAgICAgICBwb2ludHMgKz0gKDYwIC0gMTAqY2hhcHRlcnNPZmYpXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBvaW50cztcbn1cblxuZnVuY3Rpb24gZ2V0VmVyc2VUZXh0KHZlcnNlQXJyYXkpIHtcbiAgICBjb25zdCBbYm9va051bSwgY2hhcHRlck51bSwgdmVyc2VOdW1dID0gdmVyc2VBcnJheTtcbiAgICBjb25zdCBib29rID0gUEVOVEFURVVDSFtib29rTnVtIC0gMV07XG4gICAgY29uc3QgY2hhcHRlciA9IGJvb2suY2hhcHRlcnNbY2hhcHRlck51bSAtIDFdXG4gICAgY29uc3QgdmVyc2UgPSBjaGFwdGVyLnZlcnNlc1t2ZXJzZU51bSAtIDFdO1xuICAgIGlmICh2ZXJzZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB2ZXJzZVtTdHJpbmcodmVyc2VOdW0pXTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZsYXRBcnJheXNFcXVhbChhLCBiKSB7XG4gICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoYVtpXSAhPT0gYltpXSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5cbmNsYXNzIEFwcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc2NvcmU6IDAsXG4gICAgICAgICAgICBxdWVzdGlvbk51bTogMCxcbiAgICAgICAgICAgIHZlcnNlOiBnZXRSYW5kb21WZXJzZSgpLFxuICAgICAgICAgICAgYm9va0Nob2ljZTogbnVsbCxcbiAgICAgICAgICAgIGNoYXB0ZXJDaG9pY2U6IG51bGwsXG4gICAgICAgICAgICBoaXN0b3J5OiBsb2FkSGlzdG9yeSgpLFxuICAgICAgICAgICAgc2hvd0hpc3Rvcnk6IGZhbHNlLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnBpY2tCb29rID0gdGhpcy5waWNrQm9vay5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnVuZG9Cb29rQ2hvaWNlID0gdGhpcy51bmRvQm9va0Nob2ljZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnBpY2tDaGFwdGVyID0gdGhpcy5waWNrQ2hhcHRlci5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm5leHRRdWVzdGlvbiA9IHRoaXMubmV4dFF1ZXN0aW9uLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubmV4dFF1aXogPSB0aGlzLm5leHRRdWl6LmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgcGlja0Jvb2soYm9va0Nob2ljZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtib29rQ2hvaWNlfSk7XG4gICAgfVxuXG4gICAgdW5kb0Jvb2tDaG9pY2UoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2Jvb2tDaG9pY2U6IG51bGx9KTtcbiAgICB9XG5cbiAgICBwaWNrQ2hhcHRlcihjaGFwdGVyQ2hvaWNlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwb2ludHMgPSBnZXRQb2ludHMoc3RhdGUuYm9va0Nob2ljZSwgY2hhcHRlckNob2ljZSwgc3RhdGUudmVyc2UpXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGNoYXB0ZXJDaG9pY2UsXG4gICAgICAgICAgICAgICAgcXVlc3Rpb25OdW06IHN0YXRlLnF1ZXN0aW9uTnVtICsgMSxcbiAgICAgICAgICAgICAgICBzY29yZTogc3RhdGUuc2NvcmUgKyBwb2ludHMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBuZXh0UXVlc3Rpb24oKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICAgICAgICB2ZXJzZTogZ2V0UmFuZG9tVmVyc2UoKSxcbiAgICAgICAgICAgICAgICBib29rQ2hvaWNlOiBudWxsLFxuICAgICAgICAgICAgICAgIGNoYXB0ZXJDaG9pY2U6IG51bGwsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHN0YXRlLnF1ZXN0aW9uTnVtID09PSBRVUVTVElPTlNfUEVSX1FVSVopIHtcbiAgICAgICAgICAgICAgICBsZXQgZGF0YVBvaW50ID0gcmVjb3JkSGlzdG9yaWNhbFNjb3JlKHN0YXRlLnNjb3JlKTtcbiAgICAgICAgICAgICAgICBuZXdTdGF0ZS5oaXN0b3J5LnB1c2goZGF0YVBvaW50KTtcbiAgICAgICAgICAgICAgICBuZXdTdGF0ZS5zY29yZSA9IDA7XG4gICAgICAgICAgICAgICAgbmV3U3RhdGUucXVlc3Rpb25OdW0gPSAwO1xuICAgICAgICAgICAgICAgIG5ld1N0YXRlLnNob3dIaXN0b3J5ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgbmV4dFF1aXooKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Nob3dIaXN0b3J5OiBmYWxzZX0pO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3Qge3Njb3JlLCBxdWVzdGlvbk51bSwgdmVyc2UsIGJvb2tDaG9pY2UsIGNoYXB0ZXJDaG9pY2UsIHNob3dIaXN0b3J5LCBoaXN0b3J5fSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGxldCBvbkNsaWNrO1xuICAgICAgICBsZXQgc2hvd0Fuc3dlcjtcbiAgICAgICAgaWYgKHNob3dIaXN0b3J5KSB7XG4gICAgICAgICAgICBvbkNsaWNrID0gdGhpcy5uZXh0UXVpejtcbiAgICAgICAgfSBlbHNlIGlmIChib29rQ2hvaWNlID09PSBudWxsKSB7XG4gICAgICAgICAgICBvbkNsaWNrID0gdGhpcy5waWNrQm9vaztcbiAgICAgICAgICAgIHNob3dBbnN3ZXIgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmIChjaGFwdGVyQ2hvaWNlID09PSBudWxsKSB7XG4gICAgICAgICAgICBvbkNsaWNrID0gdGhpcy5waWNrQ2hhcHRlcjtcbiAgICAgICAgICAgIHNob3dBbnN3ZXIgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9uQ2xpY2sgPSB0aGlzLm5leHRRdWVzdGlvbjtcbiAgICAgICAgICAgIHNob3dBbnN3ZXIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFwcFwiPlxuICAgICAgICAgICAgICAgIDxIZWFkZXIgc2NvcmU9e3Njb3JlfSBxdWVzdGlvbk51bT17cXVlc3Rpb25OdW19IHF1ZXN0aW9uc1BlclF1aXo9e1FVRVNUSU9OU19QRVJfUVVJWn0gLz5cbiAgICAgICAgICAgICAgICB7c2hvd0hpc3RvcnkgP1xuICAgICAgICAgICAgICAgICAgICA8U2NvcmVCb2R5IGhpc3Rvcnk9e2hpc3Rvcnl9IC8+IDpcbiAgICAgICAgICAgICAgICAgICAgPEJvZHkgc2hvd0Fuc3dlcj17c2hvd0Fuc3dlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJzZT17dmVyc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9va0Nob2ljZT17Ym9va0Nob2ljZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFwdGVyQ2hvaWNlPXtjaGFwdGVyQ2hvaWNlfSAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA8Rm9vdGVyIGJvb2tDaG9pY2U9e2Jvb2tDaG9pY2V9XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFwdGVyQ2hvaWNlPXtjaGFwdGVyQ2hvaWNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17b25DbGlja31cbiAgICAgICAgICAgICAgICAgICAgICAgIGdvQmFjaz17dGhpcy51bmRvQm9va0Nob2ljZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dIaXN0b3J5PXtzaG93SGlzdG9yeX0gLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gSGVhZGVyICh7c2NvcmUsIHF1ZXN0aW9uTnVtLCBxdWVzdGlvbnNQZXJRdWl6fSkge1xuICAgIC8vIFRPRE86IGdldCBnbG93IGFuaW1hdGlvbiB0byByZXRyaWdnZXJcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlclwiPlxuICAgICAgICAgICAgPGgyPlBlbnRhdGV1Y2ggUXVpejwvaDI+XG4gICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwiZ2xvd1wiPlNDT1JFOiB7c2NvcmV9PC9oMj5cbiAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJnbG93XCI+e3F1ZXN0aW9uTnVtfS97cXVlc3Rpb25zUGVyUXVpen08L2gyPlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufVxuXG5cbmZ1bmN0aW9uIEJvZHkgKHtzaG93QW5zd2VyLCB2ZXJzZSwgYm9va0Nob2ljZSwgY2hhcHRlckNob2ljZX0pIHtcbiAgICBpZiAoc2hvd0Fuc3dlcikge1xuICAgICAgICBsZXQgcmVzdWx0TGFiZWw7XG4gICAgICAgIGNvbnN0IGNob2ljZSA9IHZlcnNlVG9MYWJlbChbYm9va0Nob2ljZSwgY2hhcHRlckNob2ljZV0pO1xuICAgICAgICBjb25zdCBwb2ludHMgPSBnZXRQb2ludHMoYm9va0Nob2ljZSwgY2hhcHRlckNob2ljZSwgdmVyc2UpO1xuICAgICAgICBpZiAodmVyc2VbMF0gPT09IGJvb2tDaG9pY2UgJiYgdmVyc2VbMV0gPT09IGNoYXB0ZXJDaG9pY2UpIHtcbiAgICAgICAgICAgIHJlc3VsdExhYmVsID0gPHAgY2xhc3NOYW1lPVwiYm9keV9fY29ycmVjdFwiPkNPUlJFQ1QhPGJyIC8+K3twb2ludHN9IHBvaW50cyE8L3A+O1xuICAgICAgICB9IGVsc2UgaWYgKHZlcnNlWzBdID09PSBib29rQ2hvaWNlKSB7XG4gICAgICAgICAgICByZXN1bHRMYWJlbCA9IDxwIGNsYXNzTmFtZT1cImJvZHlfX2Nsb3NlXCI+Q2xvc2UsIHlvdSBjaG9zZSB7Y2hvaWNlfS48YnIgLz4re3BvaW50c30gcG9pbnRzPC9wPjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdExhYmVsID0gPHAgY2xhc3NOYW1lPVwiYm9keV9fd3JvbmdcIj5Xcm9uZywgeW91IGNob3NlIHtjaG9pY2V9PC9wPjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJib2R5XCI+XG4gICAgICAgICAgICAgICAgPGgyPnt2ZXJzZVRvTGFiZWwodmVyc2UpfTwvaDI+XG4gICAgICAgICAgICAgICAgPFZlcnNlcyB2ZXJzZUFycmF5PXt2ZXJzZX0gLz5cbiAgICAgICAgICAgICAgICB7cmVzdWx0TGFiZWx9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJib2R5XCI+XG4gICAgICAgICAgICAgICAgPFZlcnNlcyB2ZXJzZUFycmF5PXt2ZXJzZX0gLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gU2NvcmVCb2R5ICh7aGlzdG9yeX0pIHtcbiAgICBjb25zdCBieVNjb3JlID0gKGEsIGIpID0+IGIuc2NvcmUgLSBhLnNjb3JlO1xuICAgIGNvbnN0IHByZXZpb3VzU2NvcmVzID0gaGlzdG9yeS5zbGljZSgpO1xuICAgIGNvbnN0IGN1cnJlbnQgPSBwcmV2aW91c1Njb3Jlcy5wb3AoKTsgIC8vIGN1cnJlbnQgc2NvcmUgaXMgb24gZW5kXG4gICAgY29uc3QgaXNDdXJyZW50ID0gKGEpID0+IGEuZGF0ZVRpbWVTdHJpbmcgPT09IGN1cnJlbnQuZGF0ZVRpbWVTdHJpbmc7XG4gICAgcHJldmlvdXNTY29yZXMuc29ydChieVNjb3JlKTtcbiAgICBjb25zdCB0b3BUZW4gPSBwcmV2aW91c1Njb3Jlcy5zbGljZSgwLCA5KTtcbiAgICB0b3BUZW4ucHVzaChjdXJyZW50KTtcbiAgICB0b3BUZW4uc29ydChieVNjb3JlKTtcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvZHlcIj5cbiAgICAgICAgICAgIDxwPlRoYW5rIHlvdSBmb3IgcGxheWluZyE8L3A+XG4gICAgICAgICAgICA8dGFibGU+XG4gICAgICAgICAgICAgICAgPHRoZWFkPlxuICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGg+PC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5TY29yZTwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGg+RGF0ZTwvdGg+XG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgICAgIHt0b3BUZW4ubWFwKChpdGVtLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBrZXk9e2l9IHN0eWxlPXtpc0N1cnJlbnQoaXRlbSkgPyB7Y29sb3I6ICcjMjNCRDk4J306IHt9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPntpICsgMX08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246ICdyaWdodCd9fT57aXRlbS5zY29yZX08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e2l0ZW0uZGF0ZVRpbWVTdHJpbmd9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICA8cD48YSBocmVmPVwibWFpbHRvOmFydHNhbmRtZXRhcGh5c2ljc0BnbWFpbC5jb21cIj5Db250YWN0IENyZWF0b3I8L2E+PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufVxuXG5mdW5jdGlvbiBWZXJzZXMoe3ZlcnNlQXJyYXl9KSB7XG4gICAgY29uc3QgcHJldlZlcnNlVGV4dCA9IGdldFByZXZWZXJzZSh2ZXJzZUFycmF5KTtcbiAgICBjb25zdCB2ZXJzZVRleHQgPSBnZXRWZXJzZVRleHQodmVyc2VBcnJheSk7XG4gICAgY29uc3QgbmV4dFZlcnNlVGV4dCA9IGdldE5leHRWZXJzZSh2ZXJzZUFycmF5KTtcbiAgICByZXR1cm4gKFxuICAgICAgICA8cD5cbiAgICAgICAgICAgIHtwcmV2VmVyc2VUZXh0ID8gPHNwYW4gY2xhc3NOYW1lPVwiYm9keV9fY29udGV4dFwiPntwcmV2VmVyc2VUZXh0ICsgJyAnfTwvc3Bhbj4gOiBudWxsfVxuICAgICAgICAgICAgPHNwYW4+e3ZlcnNlVGV4dH08L3NwYW4+XG4gICAgICAgICAgICB7bmV4dFZlcnNlVGV4dCA/IDxzcGFuIGNsYXNzTmFtZT1cImJvZHlfX2NvbnRleHRcIj57JyAnICsgbmV4dFZlcnNlVGV4dH08L3NwYW4+IDogbnVsbH1cbiAgICAgICAgPC9wPlxuICAgICk7XG59XG5cbmZ1bmN0aW9uIGdldFByZXZWZXJzZSh2ZXJzZUFycmF5KSB7XG4gICAgY29uc3QgW2Jvb2tOdW0sIGNoYXB0ZXJOdW0sIHZlcnNlTnVtXSA9IHZlcnNlQXJyYXk7XG4gICAgaWYgKHZlcnNlTnVtID09PSAxKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBnZXRWZXJzZVRleHQoW2Jvb2tOdW0sIGNoYXB0ZXJOdW0sIHZlcnNlTnVtIC0gMV0pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0TmV4dFZlcnNlKHZlcnNlQXJyYXkpIHtcbiAgICBjb25zdCBbYm9va051bSwgY2hhcHRlck51bSwgdmVyc2VOdW1dID0gdmVyc2VBcnJheTtcbiAgICAvLyByZWxpZXMgb24gYGdldFZlcnNlVGV4dGAgcmV0dXJuIHVuZGVmaW5lZCBpZiBpdCBpcyB0aGUgbGFzdCB2ZXJzZSBpbiBhIGNoYXB0ZXJcbiAgICByZXR1cm4gZ2V0VmVyc2VUZXh0KFtib29rTnVtLCBjaGFwdGVyTnVtLCB2ZXJzZU51bSArIDFdKSB8fCBudWxsO1xufVxuXG5jb25zdCBCT09LX0NPTE9SUyA9IFsnI0VDNkIzNCcsICcjM0M2NERDJywgJyM1NUFFRUUnLCAnI0FFOUJGQicsICcjRjU5QTJGJ107XG5cbmZ1bmN0aW9uIEZvb3RlciAoe2Jvb2tDaG9pY2UsIGNoYXB0ZXJDaG9pY2UsIG9uQ2xpY2ssIGdvQmFjaywgc2hvd0hpc3Rvcnl9KSB7XG4gICAgaWYgKHNob3dIaXN0b3J5KSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvb3RlclwiPlxuICAgICAgICAgICAgICAgIDxCdG4gY29sb3I9eycjNUQ0REMzJ30gb25DbGljaz17b25DbGlja30+U3RhcnQgTmV3IFF1aXo8L0J0bj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH0gZWxzZSBpZiAoYm9va0Nob2ljZSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb290ZXJcIj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJmb290ZXJfX2hlbHBcIj5XaGljaCBib29rIGlzIHRoaXMgdmVyc2UgZnJvbT88L3A+XG4gICAgICAgICAgICAgICAgPEJ0biBjb2xvcj17Qk9PS19DT0xPUlNbMF19IG9uQ2xpY2s9eygpID0+IG9uQ2xpY2soMSl9PkdlbmVzaXM8L0J0bj5cbiAgICAgICAgICAgICAgICA8QnRuIGNvbG9yPXtCT09LX0NPTE9SU1sxXX0gb25DbGljaz17KCkgPT4gb25DbGljaygyKX0+RXhvZHVzPC9CdG4+XG4gICAgICAgICAgICAgICAgPEJ0biBjb2xvcj17Qk9PS19DT0xPUlNbMl19IG9uQ2xpY2s9eygpID0+IG9uQ2xpY2soMyl9Pkxldml0aWN1czwvQnRuPlxuICAgICAgICAgICAgICAgIDxCdG4gY29sb3I9e0JPT0tfQ09MT1JTWzNdfSBvbkNsaWNrPXsoKSA9PiBvbkNsaWNrKDQpfT5OdW1iZXJzPC9CdG4+XG4gICAgICAgICAgICAgICAgPEJ0biBjb2xvcj17Qk9PS19DT0xPUlNbNF19IG9uQ2xpY2s9eygpID0+IG9uQ2xpY2soNSl9PkRldXQuPC9CdG4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGNoYXB0ZXJDaG9pY2UgPT09IG51bGwpIHtcbiAgICAgICAgY29uc3QgbnVtQ2hhcHRlcnMgPSBDSEFQVEVSU19QRVJfQk9PS1tib29rQ2hvaWNlIC0gMV07XG4gICAgICAgIGNvbnN0IGNoYXB0ZXJzID0gQXJyYXkuYXBwbHkobnVsbCwge2xlbmd0aDogbnVtQ2hhcHRlcnN9KS5tYXAoTnVtYmVyLmNhbGwsIE51bWJlcik7XG4gICAgICAgIGNvbnN0IGNvbG9yID0gQk9PS19DT0xPUlNbYm9va0Nob2ljZSAtIDFdO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb290ZXJcIj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJmb290ZXJfX2hlbHBcIj5BbmQgd2hpY2ggY2hhcHRlcj88L3A+XG4gICAgICAgICAgICAgICAge2NoYXB0ZXJzLm1hcChpID0+IDxCdG4gY29sb3I9e2NvbG9yfSBrZXk9e2l9IG9uQ2xpY2s9eygpID0+IG9uQ2xpY2soaSArIDEpfT57aSArIDF9PC9CdG4+KX1cbiAgICAgICAgICAgICAgICA8QnRuIGNvbG9yPXtcIiM5OTlcIn0gb25DbGljaz17Z29CYWNrfT5CYWNrPC9CdG4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb290ZXJcIj5cbiAgICAgICAgICAgICAgICA8QnRuIGNvbG9yPXsnIzVENERDMyd9IG9uQ2xpY2s9e29uQ2xpY2t9Pk5leHQgUXVlc3Rpb248L0J0bj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gQnRuICh7Y2hpbGRyZW4sIG9uQ2xpY2ssIGNvbG9yfSkge1xuICAgIHJldHVybiA8ZGl2IHN0eWxlPXt7YmFja2dyb3VuZENvbG9yOiBjb2xvcn19IGNsYXNzTmFtZT1cImJ1dHRvblwiIG9uQ2xpY2s9e29uQ2xpY2t9PntjaGlsZHJlbn08L2Rpdj5cbn1cblxuZnVuY3Rpb24gcmVjb3JkSGlzdG9yaWNhbFNjb3JlKHNjb3JlKSB7XG4gICAgY29uc3QgZGF0ZVRpbWVTdHJpbmcgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCk7XG4gICAgY29uc3Qgc2NvcmVzID0gbG9hZEhpc3RvcnkoKTtcbiAgICBjb25zdCBkYXRhUG9pbnQgPSB7ZGF0ZVRpbWVTdHJpbmcsIHNjb3JlfTtcbiAgICBzY29yZXMucHVzaChkYXRhUG9pbnQpO1xuICAgIGxvY2FsU2F2ZSgnaGlzdG9yeScsIHNjb3Jlcyk7XG4gICAgcmV0dXJuIGRhdGFQb2ludDtcbn1cblxuZnVuY3Rpb24gbG9hZEhpc3RvcnkoKSB7XG4gICAgbGV0IHNjb3JlcyA9IGxvY2FsTG9hZCgnaGlzdG9yeScpO1xuICAgIGlmIChzY29yZXMgPT09IG51bGwpIHtcbiAgICAgICAgc2NvcmVzID0gW107XG4gICAgfVxuICAgIHJldHVybiBzY29yZXM7XG59XG5cbmZ1bmN0aW9uIGxvY2FsU2F2ZShrZXksIGRhdGEpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbn1cblxuZnVuY3Rpb24gbG9jYWxMb2FkKGtleSwgZGF0YSkge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdoaXN0b3J5JykpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cblJlYWN0RE9NLnJlbmRlcihcbiAgPEFwcCBuYW1lPVwiVGF5bG9yXCIgLz4sXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHAnKVxuKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=
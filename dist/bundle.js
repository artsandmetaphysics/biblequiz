!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);n(1);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,c=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var s=["Genesis","Exodus","Leviticus","Numbers","Deuteronomy"],f=[50,40,27,36,34],m=window.ga||function(){};function h(){var e=function(e){var t=b(e.reduce(function(e,t){return e+t})),n=0,r=e[n];for(;t>=r;)r+=e[n+=1];return n}(f),t=PENTATEUCH[e].chapters,n=b(t.length);return[e+1,n+1,b(t[n].verses.length)+1]}function p(e){var t,n,r;if(3===e.length){var o=u(e,3);return t=o[0],n=o[1],r=o[2],y(t)+" "+n+"."+r}if(2===e.length){var c=u(e,2);return t=c[0],n=c[1],y(t)+" "+n}}function y(e){return s[e-1]}function b(e){return Math.floor(Math.random()*Math.floor(e))}function v(e,t,n){var r=0,o=u(n,3),c=o[0],a=o[1];o[2];if(e===c){r+=10;var l=Math.abs(t-a);0===l?r+=90:l<=5&&(r+=60-10*l)}return r}function d(e){var t=u(e,3),n=t[0],r=t[1],o=t[2],c=PENTATEUCH[n-1].chapters[r-1].verses[o-1];return void 0===c?null:c[String(o)]}var E=function(e){function t(e){var n,o,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(c=a(t).call(this,e))||"object"!==r(c)&&"function"!=typeof c?l(o):c).state={score:0,questionNum:0,verse:h(),bookChoice:null,chapterChoice:null,history:O(),showHistory:!1},n.pickBook=n.pickBook.bind(l(n)),n.undoBookChoice=n.undoBookChoice.bind(l(n)),n.pickChapter=n.pickChapter.bind(l(n)),n.nextQuestion=n.nextQuestion.bind(l(n)),n.nextQuiz=n.nextQuiz.bind(l(n)),n}var n,u,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(t,React.Component),n=t,(u=[{key:"pickBook",value:function(e){this.setState({bookChoice:e})}},{key:"undoBookChoice",value:function(){this.setState({bookChoice:null})}},{key:"pickChapter",value:function(e){this.setState(function(t){var n=v(t.bookChoice,e,t.verse);return{chapterChoice:e,questionNum:t.questionNum+1,score:t.score+n}})}},{key:"nextQuestion",value:function(){this.setState(function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}({},e,{verse:h(),bookChoice:null,chapterChoice:null});if(10===e.questionNum){var n=function(e){var t=(new Date).toLocaleString(),n=O(),r={dateTimeString:t,score:e};return n.push(r),o="history",c=n,localStorage.setItem(o,JSON.stringify(c)),r;var o,c}(e.score);t.history.push(n),t.score=0,t.questionNum=0,t.showHistory=!0}return t})}},{key:"nextQuiz",value:function(){this.setState({showHistory:!1})}},{key:"render",value:function(){var e,t,n=this.state,r=n.score,o=n.questionNum,c=n.verse,a=n.bookChoice,l=n.chapterChoice,i=n.showHistory,u=n.history;return i?e=this.nextQuiz:null===a?(e=this.pickBook,t=!1):null===l?(e=this.pickChapter,t=!1):(e=this.nextQuestion,t=!0),React.createElement("div",{className:"app"},React.createElement(R,{score:r,questionNum:o,questionsPerQuiz:10}),i?React.createElement(C,{history:u}):React.createElement(k,{showAnswer:t,verse:c,bookChoice:a,chapterChoice:l}),React.createElement(w,{bookChoice:a,chapterChoice:l,onClick:e,goBack:this.undoBookChoice,showHistory:i}))}}])&&c(n.prototype,u),s&&c(n,s),t}();function R(e){var t=e.score,n=e.questionNum,r=e.questionsPerQuiz;return React.createElement("div",{className:"header"},React.createElement("h2",null,"Pentateuch Quiz"),React.createElement("h2",{className:"glow"},"SCORE: ",t),React.createElement("h2",{className:"glow"},n,"/",r))}function k(e){var t=e.showAnswer,n=e.verse,r=e.bookChoice,o=e.chapterChoice;if(t){var c,a=p([r,o]),l=v(r,o,n);return c=n[0]===r&&n[1]===o?React.createElement("p",{className:"body__correct"},"CORRECT!",React.createElement("br",null),"+",l," points!"):n[0]===r?React.createElement("p",{className:"body__close"},"Close, you chose ",a,".",React.createElement("br",null),"+",l," points"):React.createElement("p",{className:"body__wrong"},"Wrong, you chose ",a),React.createElement("div",{className:"body"},React.createElement("h2",null,p(n)),React.createElement(g,{verseArray:n}),c)}return React.createElement("div",{className:"body"},React.createElement(g,{verseArray:n}))}function C(e){var t=function(e,t){return t.score-e.score},n=e.history.slice(),r=n.pop();n.sort(t);var o=n.slice(0,9);return o.push(r),o.sort(t),React.createElement("div",{className:"body"},React.createElement("p",null,"Thank you for playing!"),React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null),React.createElement("th",null,"Score"),React.createElement("th",null,"Date"))),React.createElement("tbody",null,o.map(function(e,t){return React.createElement("tr",{key:t,style:(n=e,n.dateTimeString===r.dateTimeString?{color:"#23BD98"}:{})},React.createElement("td",null,t+1),React.createElement("td",{style:{textAlign:"right"}},e.score),React.createElement("td",null,e.dateTimeString));var n}))))}function g(e){var t=e.verseArray,n=function(e){var t=u(e,3),n=t[0],r=t[1],o=t[2];return 1===o?null:d([n,r,o-1])}(t),r=d(t),o=function(e){var t=u(e,3),n=t[0],r=t[1],o=t[2];return d([n,r,o+1])||null}(t);return React.createElement("p",null,n?React.createElement("span",{className:"body__context"},n+" "):null,React.createElement("span",null,r),o?React.createElement("span",{className:"body__context"}," "+o):null)}var N=["#EC6B34","#3C64DC","#55AEEE","#AE9BFB","#F59A2F"];function w(e){var t=e.bookChoice,n=e.chapterChoice,r=e.onClick,o=e.goBack;if(e.showHistory)return React.createElement("div",{className:"footer"},React.createElement("p",{className:"footer__help"},"Please share with friends!",React.createElement("br",null),"More quizzes will come if interest ",React.createElement("a",{href:"mailto:artsandmetaphysics@gmail.com"},"Contact Creator")),React.createElement(S,{color:"#5D4DC3",onClick:r},"Start New Quiz"));if(null===t)return React.createElement("div",{className:"footer"},React.createElement("p",{className:"footer__help"},"Which book is the ",React.createElement("span",{style:{color:"#333"}},"black")," verse in?"),React.createElement(S,{color:N[0],onClick:function(){return r(1)}},"Genesis"),React.createElement(S,{color:N[1],onClick:function(){return r(2)}},"Exodus"),React.createElement(S,{color:N[2],onClick:function(){return r(3)}},"Leviticus"),React.createElement(S,{color:N[3],onClick:function(){return r(4)}},"Numbers"),React.createElement(S,{color:N[4],onClick:function(){return r(5)}},"Deut."));if(null===n){var c=f[t-1],a=Array.apply(null,{length:c}).map(Number.call,Number),l=N[t-1];return React.createElement("div",{className:"footer"},React.createElement("p",{className:"footer__help"},"And which chapter?"),a.map(function(e){return React.createElement(S,{color:l,key:e,onClick:function(){return r(e+1)}},e+1)}),React.createElement(S,{color:"#999",onClick:o},"Back"))}return React.createElement("div",{className:"footer"},React.createElement(S,{color:"#5D4DC3",onClick:r},"Next Question"))}function S(e){var t=e.children,n=e.onClick,r=e.color;return m("send","event","pentateuch","click",String(t)),React.createElement("div",{style:{backgroundColor:r},className:"button",onClick:n},t)}function O(){var e=function(e,t){try{return JSON.parse(localStorage.getItem("history"))}catch(e){return null}}();return null===e&&(e=[]),e}ReactDOM.render(React.createElement(E,{name:"Taylor"}),document.getElementById("app"))},function(e,t,n){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiQk9PS1MiLCJDSEFQVEVSU19QRVJfQk9PSyIsImdhIiwid2luZG93IiwiZ2V0UmFuZG9tVmVyc2UiLCJib29rSW5kZXgiLCJsZW5ndGhzIiwiZ2V0UmFuZG9tSW50IiwicmVkdWNlIiwicGFydGlhbF9zdW0iLCJhIiwiaW5kZXgiLCJydW5uaW5nU3VtIiwiZ2V0UmFuZG9tSW50V2VpZ2h0ZWQiLCJjaGFwdGVycyIsIlBFTlRBVEVVQ0giLCJjaGFwdGVySW5kZXgiLCJsZW5ndGgiLCJ2ZXJzZXMiLCJ2ZXJzZVRvTGFiZWwiLCJ2ZXJzZUFycmF5IiwiYm9va051bSIsImNoYXB0ZXIiLCJ2ZXJzZSIsIl92ZXJzZUFycmF5IiwiX3NsaWNlZFRvQXJyYXkiLCJib29rTnVtVG9MYWJlbCIsIl92ZXJzZUFycmF5MiIsIm1heCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImdldFBvaW50cyIsImJvb2tDaG9pY2UiLCJjaGFwdGVyQ2hvaWNlIiwiYW5zd2VyVmVyc2VBcnJheSIsInBvaW50cyIsIl9hbnN3ZXJWZXJzZUFycmF5IiwiYm9va0Fuc3dlciIsImNoYXB0ZXJBbnN3ZXIiLCJjaGFwdGVyc09mZiIsImFicyIsImdldFZlcnNlVGV4dCIsIl92ZXJzZUFycmF5MyIsImNoYXB0ZXJOdW0iLCJ2ZXJzZU51bSIsInVuZGVmaW5lZCIsIlN0cmluZyIsIkFwcCIsInByb3BzIiwiX3RoaXMiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX2dldFByb3RvdHlwZU9mIiwic3RhdGUiLCJzY29yZSIsInF1ZXN0aW9uTnVtIiwiaGlzdG9yeSIsImxvYWRIaXN0b3J5Iiwic2hvd0hpc3RvcnkiLCJwaWNrQm9vayIsIl9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQiLCJ1bmRvQm9va0Nob2ljZSIsInBpY2tDaGFwdGVyIiwibmV4dFF1ZXN0aW9uIiwibmV4dFF1aXoiLCJSZWFjdCIsIkNvbXBvbmVudCIsInNldFN0YXRlIiwibmV3U3RhdGUiLCJfb2JqZWN0U3ByZWFkIiwiZGF0YVBvaW50IiwiZGF0ZVRpbWVTdHJpbmciLCJEYXRlIiwidG9Mb2NhbGVTdHJpbmciLCJzY29yZXMiLCJwdXNoIiwiZGF0YSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwicmVjb3JkSGlzdG9yaWNhbFNjb3JlIiwib25DbGljayIsInNob3dBbnN3ZXIiLCJfdGhpcyRzdGF0ZSIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJIZWFkZXIiLCJxdWVzdGlvbnNQZXJRdWl6IiwiU2NvcmVCb2R5IiwiQm9keSIsIkZvb3RlciIsImdvQmFjayIsIl9yZWYiLCJfcmVmMiIsInJlc3VsdExhYmVsIiwiY2hvaWNlIiwiVmVyc2VzIiwiX3JlZjMiLCJieVNjb3JlIiwiYiIsInByZXZpb3VzU2NvcmVzIiwic2xpY2UiLCJjdXJyZW50IiwicG9wIiwic29ydCIsInRvcFRlbiIsIm1hcCIsIml0ZW0iLCJzdHlsZSIsImNvbG9yIiwidGV4dEFsaWduIiwiX3JlZjQiLCJwcmV2VmVyc2VUZXh0IiwiX3ZlcnNlQXJyYXk0IiwiZ2V0UHJldlZlcnNlIiwidmVyc2VUZXh0IiwibmV4dFZlcnNlVGV4dCIsIl92ZXJzZUFycmF5NSIsImdldE5leHRWZXJzZSIsIkJPT0tfQ09MT1JTIiwiX3JlZjUiLCJocmVmIiwiQnRuIiwibnVtQ2hhcHRlcnMiLCJBcnJheSIsImFwcGx5IiwiTnVtYmVyIiwiX3JlZjYiLCJjaGlsZHJlbiIsImJhY2tncm91bmRDb2xvciIsInBhcnNlIiwiZ2V0SXRlbSIsIl91bnVzZWQiLCJsb2NhbExvYWQiLCJSZWFjdERPTSIsInJlbmRlciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxFQUFBLENBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxZQUFBLENBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdBQUEsaUJBQUFGLFFBQUFHLFdBQUEsT0FBQUgsRUFDQSxJQUFBSSxFQUFBWCxPQUFBWSxPQUFB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QVUvQyxFQUFpQjhDLEVBQWpCOUMsUUFBUzRCLEVBQVFrQixFQUFSbEIsTUFFOUIsT0FEQTdHLEVBQUcsT0FBUyxRQUFTLGFBQWMsUUFBUzZDLE9BQU9tRixJQUM1Q2hFLE1BQUFvQixjQUFBLE9BQUt3QixNQUFPLENBQUNxQixnQkFBaUJwQixHQUFReEIsVUFBVSxTQUFTSixRQUFTQSxHQUFVK0MsR0FZdkYsU0FBU3hFLElBQ0wsSUFBSWlCLEVBV1IsU0FBbUJwRixFQUFLc0YsR0FDcEIsSUFDSSxPQUFPRyxLQUFLb0QsTUFBTXRELGFBQWF1RCxRQUFRLFlBQ3pDLE1BQUFDLEdBQ0UsT0FBTyxNQWZFQyxHQUliLE9BSGUsT0FBWDVELElBQ0FBLEVBQVMsSUFFTkEsRUFlWDZELFNBQVNDLE9BQ1B2RSxNQUFBb0IsY0FBQ3RDLEVBQUQsQ0FBS3pFLEtBQUssV0FDVm1LLFNBQVNDLGVBQWUiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvZGlzdC9cIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IFwiLi9pbmRleC5zY3NzXCI7XG5cbmNvbnN0IFFVRVNUSU9OU19QRVJfUVVJWiA9IDEwO1xuXG5jb25zdCBCT09LUyA9IFsnR2VuZXNpcycsICdFeG9kdXMnLCAnTGV2aXRpY3VzJywgJ051bWJlcnMnLCAnRGV1dGVyb25vbXknXTtcblxuY29uc3QgQ0hBUFRFUlNfUEVSX0JPT0sgPSBbNTAsIDQwLCAyNywgMzYsIDM0XTtcblxubGV0IGdhID0gd2luZG93LmdhIHx8IGZ1bmN0aW9uKCkge307XG5cbmZ1bmN0aW9uIGdldFJhbmRvbVZlcnNlKCkge1xuICAgIGNvbnN0IGJvb2tJbmRleCA9IGdldFJhbmRvbUludFdlaWdodGVkKENIQVBURVJTX1BFUl9CT09LKTtcbiAgICBjb25zdCBjaGFwdGVycyA9IFBFTlRBVEVVQ0hbYm9va0luZGV4XS5jaGFwdGVycztcbiAgICBjb25zdCBjaGFwdGVySW5kZXggPSBnZXRSYW5kb21JbnQoY2hhcHRlcnMubGVuZ3RoKTtcbiAgICBjb25zdCB2ZXJzZXMgPSBjaGFwdGVyc1tjaGFwdGVySW5kZXhdLnZlcnNlcztcbiAgICBjb25zdCB2ZXJzZUluZGV4ID0gZ2V0UmFuZG9tSW50KHZlcnNlcy5sZW5ndGgpXG4gICAgcmV0dXJuIFtib29rSW5kZXggKyAxLCBjaGFwdGVySW5kZXggKyAxLCB2ZXJzZUluZGV4ICsgMV1cbn1cblxuZnVuY3Rpb24gdmVyc2VUb0xhYmVsKHZlcnNlQXJyYXkpIHtcbiAgICBsZXQgYm9va051bSwgY2hhcHRlciwgdmVyc2U7XG4gICAgaWYgKHZlcnNlQXJyYXkubGVuZ3RoID09PSAzKSB7XG4gICAgICAgIFtib29rTnVtLCBjaGFwdGVyLCB2ZXJzZV0gPSB2ZXJzZUFycmF5O1xuICAgICAgICByZXR1cm4gYm9va051bVRvTGFiZWwoYm9va051bSkgKyAnICcgKyBjaGFwdGVyICsgJy4nICsgdmVyc2U7XG4gICAgfSBlbHNlIGlmICh2ZXJzZUFycmF5Lmxlbmd0aCA9PT0gMikge1xuICAgICAgICBbYm9va051bSwgY2hhcHRlcl0gPSB2ZXJzZUFycmF5O1xuICAgICAgICByZXR1cm4gYm9va051bVRvTGFiZWwoYm9va051bSkgKyAnICcgKyBjaGFwdGVyO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYm9va051bVRvTGFiZWwoYm9va051bSkge1xuICAgIHJldHVybiBCT09LU1tib29rTnVtIC0gMV07XG59XG5cbmZ1bmN0aW9uIGdldFJhbmRvbUludChtYXgpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogTWF0aC5mbG9vcihtYXgpKTtcbn1cblxuZnVuY3Rpb24gZ2V0UmFuZG9tSW50V2VpZ2h0ZWQobGVuZ3Rocykge1xuICAgIC8vIHVzZWQgdG8gd2VpZ2h0IGJvb2tzIG9mIGJpYmxlIGJ5IGNoYXB0ZXIgbGVuZ3RoXG4gICAgY29uc3Qgc3VtID0gbGVuZ3Rocy5yZWR1Y2UoKHBhcnRpYWxfc3VtLCBhKSA9PiBwYXJ0aWFsX3N1bSArIGEpO1xuICAgIGNvbnN0IGkgPSBnZXRSYW5kb21JbnQoc3VtKTtcbiAgICBsZXQgaW5kZXggPSAwO1xuICAgIGxldCBydW5uaW5nU3VtID0gbGVuZ3Roc1tpbmRleF07XG4gICAgd2hpbGUgKGkgPj0gcnVubmluZ1N1bSkge1xuICAgICAgICBpbmRleCArPSAxO1xuICAgICAgICBydW5uaW5nU3VtICs9IGxlbmd0aHNbaW5kZXhdO1xuICAgIH1cbiAgICByZXR1cm4gaW5kZXg7XG59XG5cbmZ1bmN0aW9uIGdldFBvaW50cyhib29rQ2hvaWNlLCBjaGFwdGVyQ2hvaWNlLCBhbnN3ZXJWZXJzZUFycmF5KSB7XG4gICAgbGV0IHBvaW50cyA9IDA7XG4gICAgY29uc3QgW2Jvb2tBbnN3ZXIsIGNoYXB0ZXJBbnN3ZXIsIF9dID0gYW5zd2VyVmVyc2VBcnJheTtcbiAgICBpZiAoYm9va0Nob2ljZSA9PT0gYm9va0Fuc3dlcikge1xuICAgICAgICBwb2ludHMgKz0gMTA7XG4gICAgICAgIGNvbnN0IGNoYXB0ZXJzT2ZmID0gTWF0aC5hYnMoY2hhcHRlckNob2ljZSAtIGNoYXB0ZXJBbnN3ZXIpO1xuICAgICAgICBpZiAoY2hhcHRlcnNPZmYgPT09IDApIHtcbiAgICAgICAgICAgIHBvaW50cyArPSA5MDtcbiAgICAgICAgfSBlbHNlIGlmIChjaGFwdGVyc09mZiA8PSA1KSB7XG4gICAgICAgICAgICBwb2ludHMgKz0gKDYwIC0gMTAqY2hhcHRlcnNPZmYpXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBvaW50cztcbn1cblxuZnVuY3Rpb24gZ2V0VmVyc2VUZXh0KHZlcnNlQXJyYXkpIHtcbiAgICBjb25zdCBbYm9va051bSwgY2hhcHRlck51bSwgdmVyc2VOdW1dID0gdmVyc2VBcnJheTtcbiAgICBjb25zdCBib29rID0gUEVOVEFURVVDSFtib29rTnVtIC0gMV07XG4gICAgY29uc3QgY2hhcHRlciA9IGJvb2suY2hhcHRlcnNbY2hhcHRlck51bSAtIDFdXG4gICAgY29uc3QgdmVyc2UgPSBjaGFwdGVyLnZlcnNlc1t2ZXJzZU51bSAtIDFdO1xuICAgIGlmICh2ZXJzZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB2ZXJzZVtTdHJpbmcodmVyc2VOdW0pXTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZsYXRBcnJheXNFcXVhbChhLCBiKSB7XG4gICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoYVtpXSAhPT0gYltpXSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5cbmNsYXNzIEFwcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc2NvcmU6IDAsXG4gICAgICAgICAgICBxdWVzdGlvbk51bTogMCxcbiAgICAgICAgICAgIHZlcnNlOiBnZXRSYW5kb21WZXJzZSgpLFxuICAgICAgICAgICAgYm9va0Nob2ljZTogbnVsbCxcbiAgICAgICAgICAgIGNoYXB0ZXJDaG9pY2U6IG51bGwsXG4gICAgICAgICAgICBoaXN0b3J5OiBsb2FkSGlzdG9yeSgpLFxuICAgICAgICAgICAgc2hvd0hpc3Rvcnk6IGZhbHNlLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnBpY2tCb29rID0gdGhpcy5waWNrQm9vay5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnVuZG9Cb29rQ2hvaWNlID0gdGhpcy51bmRvQm9va0Nob2ljZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnBpY2tDaGFwdGVyID0gdGhpcy5waWNrQ2hhcHRlci5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm5leHRRdWVzdGlvbiA9IHRoaXMubmV4dFF1ZXN0aW9uLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubmV4dFF1aXogPSB0aGlzLm5leHRRdWl6LmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgcGlja0Jvb2soYm9va0Nob2ljZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtib29rQ2hvaWNlfSk7XG4gICAgfVxuXG4gICAgdW5kb0Jvb2tDaG9pY2UoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2Jvb2tDaG9pY2U6IG51bGx9KTtcbiAgICB9XG5cbiAgICBwaWNrQ2hhcHRlcihjaGFwdGVyQ2hvaWNlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwb2ludHMgPSBnZXRQb2ludHMoc3RhdGUuYm9va0Nob2ljZSwgY2hhcHRlckNob2ljZSwgc3RhdGUudmVyc2UpXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGNoYXB0ZXJDaG9pY2UsXG4gICAgICAgICAgICAgICAgcXVlc3Rpb25OdW06IHN0YXRlLnF1ZXN0aW9uTnVtICsgMSxcbiAgICAgICAgICAgICAgICBzY29yZTogc3RhdGUuc2NvcmUgKyBwb2ludHMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBuZXh0UXVlc3Rpb24oKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICAgICAgICB2ZXJzZTogZ2V0UmFuZG9tVmVyc2UoKSxcbiAgICAgICAgICAgICAgICBib29rQ2hvaWNlOiBudWxsLFxuICAgICAgICAgICAgICAgIGNoYXB0ZXJDaG9pY2U6IG51bGwsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHN0YXRlLnF1ZXN0aW9uTnVtID09PSBRVUVTVElPTlNfUEVSX1FVSVopIHtcbiAgICAgICAgICAgICAgICBsZXQgZGF0YVBvaW50ID0gcmVjb3JkSGlzdG9yaWNhbFNjb3JlKHN0YXRlLnNjb3JlKTtcbiAgICAgICAgICAgICAgICBuZXdTdGF0ZS5oaXN0b3J5LnB1c2goZGF0YVBvaW50KTtcbiAgICAgICAgICAgICAgICBuZXdTdGF0ZS5zY29yZSA9IDA7XG4gICAgICAgICAgICAgICAgbmV3U3RhdGUucXVlc3Rpb25OdW0gPSAwO1xuICAgICAgICAgICAgICAgIG5ld1N0YXRlLnNob3dIaXN0b3J5ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgbmV4dFF1aXooKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Nob3dIaXN0b3J5OiBmYWxzZX0pO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3Qge3Njb3JlLCBxdWVzdGlvbk51bSwgdmVyc2UsIGJvb2tDaG9pY2UsIGNoYXB0ZXJDaG9pY2UsIHNob3dIaXN0b3J5LCBoaXN0b3J5fSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGxldCBvbkNsaWNrO1xuICAgICAgICBsZXQgc2hvd0Fuc3dlcjtcbiAgICAgICAgaWYgKHNob3dIaXN0b3J5KSB7XG4gICAgICAgICAgICBvbkNsaWNrID0gdGhpcy5uZXh0UXVpejtcbiAgICAgICAgfSBlbHNlIGlmIChib29rQ2hvaWNlID09PSBudWxsKSB7XG4gICAgICAgICAgICBvbkNsaWNrID0gdGhpcy5waWNrQm9vaztcbiAgICAgICAgICAgIHNob3dBbnN3ZXIgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmIChjaGFwdGVyQ2hvaWNlID09PSBudWxsKSB7XG4gICAgICAgICAgICBvbkNsaWNrID0gdGhpcy5waWNrQ2hhcHRlcjtcbiAgICAgICAgICAgIHNob3dBbnN3ZXIgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9uQ2xpY2sgPSB0aGlzLm5leHRRdWVzdGlvbjtcbiAgICAgICAgICAgIHNob3dBbnN3ZXIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFwcFwiPlxuICAgICAgICAgICAgICAgIDxIZWFkZXIgc2NvcmU9e3Njb3JlfSBxdWVzdGlvbk51bT17cXVlc3Rpb25OdW19IHF1ZXN0aW9uc1BlclF1aXo9e1FVRVNUSU9OU19QRVJfUVVJWn0gLz5cbiAgICAgICAgICAgICAgICB7c2hvd0hpc3RvcnkgP1xuICAgICAgICAgICAgICAgICAgICA8U2NvcmVCb2R5IGhpc3Rvcnk9e2hpc3Rvcnl9IC8+IDpcbiAgICAgICAgICAgICAgICAgICAgPEJvZHkgc2hvd0Fuc3dlcj17c2hvd0Fuc3dlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJzZT17dmVyc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9va0Nob2ljZT17Ym9va0Nob2ljZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFwdGVyQ2hvaWNlPXtjaGFwdGVyQ2hvaWNlfSAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA8Rm9vdGVyIGJvb2tDaG9pY2U9e2Jvb2tDaG9pY2V9XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFwdGVyQ2hvaWNlPXtjaGFwdGVyQ2hvaWNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17b25DbGlja31cbiAgICAgICAgICAgICAgICAgICAgICAgIGdvQmFjaz17dGhpcy51bmRvQm9va0Nob2ljZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dIaXN0b3J5PXtzaG93SGlzdG9yeX0gLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gSGVhZGVyICh7c2NvcmUsIHF1ZXN0aW9uTnVtLCBxdWVzdGlvbnNQZXJRdWl6fSkge1xuICAgIC8vIFRPRE86IGdldCBnbG93IGFuaW1hdGlvbiB0byByZXRyaWdnZXJcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlclwiPlxuICAgICAgICAgICAgPGgyPlBlbnRhdGV1Y2ggUXVpejwvaDI+XG4gICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwiZ2xvd1wiPlNDT1JFOiB7c2NvcmV9PC9oMj5cbiAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJnbG93XCI+e3F1ZXN0aW9uTnVtfS97cXVlc3Rpb25zUGVyUXVpen08L2gyPlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufVxuXG5cbmZ1bmN0aW9uIEJvZHkgKHtzaG93QW5zd2VyLCB2ZXJzZSwgYm9va0Nob2ljZSwgY2hhcHRlckNob2ljZX0pIHtcbiAgICBpZiAoc2hvd0Fuc3dlcikge1xuICAgICAgICBsZXQgcmVzdWx0TGFiZWw7XG4gICAgICAgIGNvbnN0IGNob2ljZSA9IHZlcnNlVG9MYWJlbChbYm9va0Nob2ljZSwgY2hhcHRlckNob2ljZV0pO1xuICAgICAgICBjb25zdCBwb2ludHMgPSBnZXRQb2ludHMoYm9va0Nob2ljZSwgY2hhcHRlckNob2ljZSwgdmVyc2UpO1xuICAgICAgICBpZiAodmVyc2VbMF0gPT09IGJvb2tDaG9pY2UgJiYgdmVyc2VbMV0gPT09IGNoYXB0ZXJDaG9pY2UpIHtcbiAgICAgICAgICAgIHJlc3VsdExhYmVsID0gPHAgY2xhc3NOYW1lPVwiYm9keV9fY29ycmVjdFwiPkNPUlJFQ1QhPGJyIC8+K3twb2ludHN9IHBvaW50cyE8L3A+O1xuICAgICAgICB9IGVsc2UgaWYgKHZlcnNlWzBdID09PSBib29rQ2hvaWNlKSB7XG4gICAgICAgICAgICByZXN1bHRMYWJlbCA9IDxwIGNsYXNzTmFtZT1cImJvZHlfX2Nsb3NlXCI+Q2xvc2UsIHlvdSBjaG9zZSB7Y2hvaWNlfS48YnIgLz4re3BvaW50c30gcG9pbnRzPC9wPjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdExhYmVsID0gPHAgY2xhc3NOYW1lPVwiYm9keV9fd3JvbmdcIj5Xcm9uZywgeW91IGNob3NlIHtjaG9pY2V9PC9wPjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJib2R5XCI+XG4gICAgICAgICAgICAgICAgPGgyPnt2ZXJzZVRvTGFiZWwodmVyc2UpfTwvaDI+XG4gICAgICAgICAgICAgICAgPFZlcnNlcyB2ZXJzZUFycmF5PXt2ZXJzZX0gLz5cbiAgICAgICAgICAgICAgICB7cmVzdWx0TGFiZWx9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJib2R5XCI+XG4gICAgICAgICAgICAgICAgPFZlcnNlcyB2ZXJzZUFycmF5PXt2ZXJzZX0gLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gU2NvcmVCb2R5ICh7aGlzdG9yeX0pIHtcbiAgICBjb25zdCBieVNjb3JlID0gKGEsIGIpID0+IGIuc2NvcmUgLSBhLnNjb3JlO1xuICAgIGNvbnN0IHByZXZpb3VzU2NvcmVzID0gaGlzdG9yeS5zbGljZSgpO1xuICAgIGNvbnN0IGN1cnJlbnQgPSBwcmV2aW91c1Njb3Jlcy5wb3AoKTsgIC8vIGN1cnJlbnQgc2NvcmUgaXMgb24gZW5kXG4gICAgY29uc3QgaXNDdXJyZW50ID0gKGEpID0+IGEuZGF0ZVRpbWVTdHJpbmcgPT09IGN1cnJlbnQuZGF0ZVRpbWVTdHJpbmc7XG4gICAgcHJldmlvdXNTY29yZXMuc29ydChieVNjb3JlKTtcbiAgICBjb25zdCB0b3BUZW4gPSBwcmV2aW91c1Njb3Jlcy5zbGljZSgwLCA5KTtcbiAgICB0b3BUZW4ucHVzaChjdXJyZW50KTtcbiAgICB0b3BUZW4uc29ydChieVNjb3JlKTtcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvZHlcIj5cbiAgICAgICAgICAgIDxwPlRoYW5rIHlvdSBmb3IgcGxheWluZyE8L3A+XG4gICAgICAgICAgICA8dGFibGU+XG4gICAgICAgICAgICAgICAgPHRoZWFkPlxuICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGg+PC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5TY29yZTwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGg+RGF0ZTwvdGg+XG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgICAgIHt0b3BUZW4ubWFwKChpdGVtLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBrZXk9e2l9IHN0eWxlPXtpc0N1cnJlbnQoaXRlbSkgPyB7Y29sb3I6ICcjMjNCRDk4J306IHt9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPntpICsgMX08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246ICdyaWdodCd9fT57aXRlbS5zY29yZX08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e2l0ZW0uZGF0ZVRpbWVTdHJpbmd9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59XG5cbmZ1bmN0aW9uIFZlcnNlcyh7dmVyc2VBcnJheX0pIHtcbiAgICBjb25zdCBwcmV2VmVyc2VUZXh0ID0gZ2V0UHJldlZlcnNlKHZlcnNlQXJyYXkpO1xuICAgIGNvbnN0IHZlcnNlVGV4dCA9IGdldFZlcnNlVGV4dCh2ZXJzZUFycmF5KTtcbiAgICBjb25zdCBuZXh0VmVyc2VUZXh0ID0gZ2V0TmV4dFZlcnNlKHZlcnNlQXJyYXkpO1xuICAgIHJldHVybiAoXG4gICAgICAgIDxwPlxuICAgICAgICAgICAge3ByZXZWZXJzZVRleHQgPyA8c3BhbiBjbGFzc05hbWU9XCJib2R5X19jb250ZXh0XCI+e3ByZXZWZXJzZVRleHQgKyAnICd9PC9zcGFuPiA6IG51bGx9XG4gICAgICAgICAgICA8c3Bhbj57dmVyc2VUZXh0fTwvc3Bhbj5cbiAgICAgICAgICAgIHtuZXh0VmVyc2VUZXh0ID8gPHNwYW4gY2xhc3NOYW1lPVwiYm9keV9fY29udGV4dFwiPnsnICcgKyBuZXh0VmVyc2VUZXh0fTwvc3Bhbj4gOiBudWxsfVxuICAgICAgICA8L3A+XG4gICAgKTtcbn1cblxuZnVuY3Rpb24gZ2V0UHJldlZlcnNlKHZlcnNlQXJyYXkpIHtcbiAgICBjb25zdCBbYm9va051bSwgY2hhcHRlck51bSwgdmVyc2VOdW1dID0gdmVyc2VBcnJheTtcbiAgICBpZiAodmVyc2VOdW0gPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGdldFZlcnNlVGV4dChbYm9va051bSwgY2hhcHRlck51bSwgdmVyc2VOdW0gLSAxXSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXROZXh0VmVyc2UodmVyc2VBcnJheSkge1xuICAgIGNvbnN0IFtib29rTnVtLCBjaGFwdGVyTnVtLCB2ZXJzZU51bV0gPSB2ZXJzZUFycmF5O1xuICAgIC8vIHJlbGllcyBvbiBgZ2V0VmVyc2VUZXh0YCByZXR1cm4gdW5kZWZpbmVkIGlmIGl0IGlzIHRoZSBsYXN0IHZlcnNlIGluIGEgY2hhcHRlclxuICAgIHJldHVybiBnZXRWZXJzZVRleHQoW2Jvb2tOdW0sIGNoYXB0ZXJOdW0sIHZlcnNlTnVtICsgMV0pIHx8IG51bGw7XG59XG5cbmNvbnN0IEJPT0tfQ09MT1JTID0gWycjRUM2QjM0JywgJyMzQzY0REMnLCAnIzU1QUVFRScsICcjQUU5QkZCJywgJyNGNTlBMkYnXTtcblxuZnVuY3Rpb24gRm9vdGVyICh7Ym9va0Nob2ljZSwgY2hhcHRlckNob2ljZSwgb25DbGljaywgZ29CYWNrLCBzaG93SGlzdG9yeX0pIHtcbiAgICBpZiAoc2hvd0hpc3RvcnkpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9vdGVyXCI+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9vdGVyX19oZWxwXCI+UGxlYXNlIHNoYXJlIHdpdGggZnJpZW5kcyE8YnIgLz5Nb3JlIHF1aXp6ZXMgd2lsbCBjb21lIGlmIGludGVyZXN0IDxhIGhyZWY9XCJtYWlsdG86YXJ0c2FuZG1ldGFwaHlzaWNzQGdtYWlsLmNvbVwiPkNvbnRhY3QgQ3JlYXRvcjwvYT48L3A+XG4gICAgICAgICAgICAgICAgPEJ0biBjb2xvcj17JyM1RDREQzMnfSBvbkNsaWNrPXtvbkNsaWNrfT5TdGFydCBOZXcgUXVpejwvQnRuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfSBlbHNlIGlmIChib29rQ2hvaWNlID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvb3RlclwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImZvb3Rlcl9faGVscFwiPldoaWNoIGJvb2sgaXMgdGhlIDxzcGFuIHN0eWxlPXt7Y29sb3I6ICcjMzMzJ319PmJsYWNrPC9zcGFuPiB2ZXJzZSBpbj88L3A+XG4gICAgICAgICAgICAgICAgPEJ0biBjb2xvcj17Qk9PS19DT0xPUlNbMF19IG9uQ2xpY2s9eygpID0+IG9uQ2xpY2soMSl9PkdlbmVzaXM8L0J0bj5cbiAgICAgICAgICAgICAgICA8QnRuIGNvbG9yPXtCT09LX0NPTE9SU1sxXX0gb25DbGljaz17KCkgPT4gb25DbGljaygyKX0+RXhvZHVzPC9CdG4+XG4gICAgICAgICAgICAgICAgPEJ0biBjb2xvcj17Qk9PS19DT0xPUlNbMl19IG9uQ2xpY2s9eygpID0+IG9uQ2xpY2soMyl9Pkxldml0aWN1czwvQnRuPlxuICAgICAgICAgICAgICAgIDxCdG4gY29sb3I9e0JPT0tfQ09MT1JTWzNdfSBvbkNsaWNrPXsoKSA9PiBvbkNsaWNrKDQpfT5OdW1iZXJzPC9CdG4+XG4gICAgICAgICAgICAgICAgPEJ0biBjb2xvcj17Qk9PS19DT0xPUlNbNF19IG9uQ2xpY2s9eygpID0+IG9uQ2xpY2soNSl9PkRldXQuPC9CdG4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGNoYXB0ZXJDaG9pY2UgPT09IG51bGwpIHtcbiAgICAgICAgY29uc3QgbnVtQ2hhcHRlcnMgPSBDSEFQVEVSU19QRVJfQk9PS1tib29rQ2hvaWNlIC0gMV07XG4gICAgICAgIGNvbnN0IGNoYXB0ZXJzID0gQXJyYXkuYXBwbHkobnVsbCwge2xlbmd0aDogbnVtQ2hhcHRlcnN9KS5tYXAoTnVtYmVyLmNhbGwsIE51bWJlcik7XG4gICAgICAgIGNvbnN0IGNvbG9yID0gQk9PS19DT0xPUlNbYm9va0Nob2ljZSAtIDFdO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb290ZXJcIj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJmb290ZXJfX2hlbHBcIj5BbmQgd2hpY2ggY2hhcHRlcj88L3A+XG4gICAgICAgICAgICAgICAge2NoYXB0ZXJzLm1hcChpID0+IDxCdG4gY29sb3I9e2NvbG9yfSBrZXk9e2l9IG9uQ2xpY2s9eygpID0+IG9uQ2xpY2soaSArIDEpfT57aSArIDF9PC9CdG4+KX1cbiAgICAgICAgICAgICAgICA8QnRuIGNvbG9yPXtcIiM5OTlcIn0gb25DbGljaz17Z29CYWNrfT5CYWNrPC9CdG4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb290ZXJcIj5cbiAgICAgICAgICAgICAgICA8QnRuIGNvbG9yPXsnIzVENERDMyd9IG9uQ2xpY2s9e29uQ2xpY2t9Pk5leHQgUXVlc3Rpb248L0J0bj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gQnRuICh7Y2hpbGRyZW4sIG9uQ2xpY2ssIGNvbG9yfSkge1xuICAgIGdhKCdzZW5kJywgwqAnZXZlbnQnLCAncGVudGF0ZXVjaCcsICdjbGljaycsIFN0cmluZyhjaGlsZHJlbikpO1xuICAgIHJldHVybiA8ZGl2IHN0eWxlPXt7YmFja2dyb3VuZENvbG9yOiBjb2xvcn19IGNsYXNzTmFtZT1cImJ1dHRvblwiIG9uQ2xpY2s9e29uQ2xpY2t9PntjaGlsZHJlbn08L2Rpdj5cbn1cblxuZnVuY3Rpb24gcmVjb3JkSGlzdG9yaWNhbFNjb3JlKHNjb3JlKSB7XG4gICAgY29uc3QgZGF0ZVRpbWVTdHJpbmcgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCk7XG4gICAgY29uc3Qgc2NvcmVzID0gbG9hZEhpc3RvcnkoKTtcbiAgICBjb25zdCBkYXRhUG9pbnQgPSB7ZGF0ZVRpbWVTdHJpbmcsIHNjb3JlfTtcbiAgICBzY29yZXMucHVzaChkYXRhUG9pbnQpO1xuICAgIGxvY2FsU2F2ZSgnaGlzdG9yeScsIHNjb3Jlcyk7XG4gICAgcmV0dXJuIGRhdGFQb2ludDtcbn1cblxuZnVuY3Rpb24gbG9hZEhpc3RvcnkoKSB7XG4gICAgbGV0IHNjb3JlcyA9IGxvY2FsTG9hZCgnaGlzdG9yeScpO1xuICAgIGlmIChzY29yZXMgPT09IG51bGwpIHtcbiAgICAgICAgc2NvcmVzID0gW107XG4gICAgfVxuICAgIHJldHVybiBzY29yZXM7XG59XG5cbmZ1bmN0aW9uIGxvY2FsU2F2ZShrZXksIGRhdGEpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbn1cblxuZnVuY3Rpb24gbG9jYWxMb2FkKGtleSwgZGF0YSkge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdoaXN0b3J5JykpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cblJlYWN0RE9NLnJlbmRlcihcbiAgPEFwcCBuYW1lPVwiVGF5bG9yXCIgLz4sXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHAnKVxuKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=
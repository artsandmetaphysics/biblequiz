!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);r(1);function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,c=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw c}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var s=["Genesis","Exodus","Leviticus","Numbers","Deuteronomy"],f=[50,40,27,36,34];function m(){var e=y(PENTATEUCH.length),t=PENTATEUCH[e].chapters,r=y(t.length);return[e+1,r+1,y(t[r].verses.length)+1]}function h(e){var t,r,n;if(3===e.length){var o=u(e,3);return t=o[0],r=o[1],n=o[2],p(t)+" "+r+"."+n}if(2===e.length){var c=u(e,2);return t=c[0],r=c[1],p(t)+" "+r}}function p(e){return s[e-1]}function y(e){return Math.floor(Math.random()*Math.floor(e))}function b(e,t,r){var n=0,o=u(r,3),c=o[0],a=o[1];o[2];if(e===c){n+=10;var i=Math.abs(t-a);0===i?n+=90:i<=5&&(n+=60-10*i)}return n}function v(e){var t=u(e,3),r=t[0],n=t[1],o=t[2],c=PENTATEUCH[r-1].chapters[n-1].verses[o-1];return void 0===c?null:c[String(o)]}var d=function(e){function t(e){var r,o,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(r=!(c=a(t).call(this,e))||"object"!==n(c)&&"function"!=typeof c?i(o):c).state={score:0,questionNum:0,verse:m(),bookChoice:null,chapterChoice:null,history:S(),showHistory:!1},r.pickBook=r.pickBook.bind(i(r)),r.undoBookChoice=r.undoBookChoice.bind(i(r)),r.pickChapter=r.pickChapter.bind(i(r)),r.nextQuestion=r.nextQuestion.bind(i(r)),r.nextQuiz=r.nextQuiz.bind(i(r)),r}var r,u,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,React.Component),r=t,(u=[{key:"pickBook",value:function(e){this.setState({bookChoice:e})}},{key:"undoBookChoice",value:function(){this.setState({bookChoice:null})}},{key:"pickChapter",value:function(e){this.setState(function(t){var r=b(t.bookChoice,e,t.verse);return{chapterChoice:e,questionNum:t.questionNum+1,score:t.score+r}})}},{key:"nextQuestion",value:function(){this.setState(function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}({},e,{verse:m(),bookChoice:null,chapterChoice:null});if(1===e.questionNum){var r=function(e){var t=(new Date).toLocaleString(),r=S(),n={dateTimeString:t,score:e};return r.push(n),o="history",c=r,localStorage.setItem(o,JSON.stringify(c)),n;var o,c}(e.score);t.history.push(r),t.score=0,t.questionNum=0,t.showHistory=!0}return t})}},{key:"nextQuiz",value:function(){this.setState({showHistory:!1})}},{key:"render",value:function(){var e,t,r=this.state,n=r.score,o=r.questionNum,c=r.verse,a=r.bookChoice,i=r.chapterChoice,l=r.showHistory,u=r.history;return l?e=this.nextQuiz:null===a?(e=this.pickBook,t=!1):null===i?(e=this.pickChapter,t=!1):(e=this.nextQuestion,t=!0),React.createElement("div",{className:"app"},React.createElement(E,{score:n,questionNum:o,questionsPerQuiz:1}),l?React.createElement(k,{history:u}):React.createElement(R,{showAnswer:t,verse:c,bookChoice:a,chapterChoice:i}),React.createElement(N,{bookChoice:a,chapterChoice:i,onClick:e,goBack:this.undoBookChoice,showHistory:l}))}}])&&c(r.prototype,u),s&&c(r,s),t}();function E(e){var t=e.score,r=e.questionNum,n=e.questionsPerQuiz;return React.createElement("div",{className:"header"},React.createElement("h2",null,"Pentateuch Quiz"),React.createElement("h2",{className:"glow"},"SCORE: ",t),React.createElement("h2",{className:"glow"},r,"/",n))}function R(e){var t=e.showAnswer,r=e.verse,n=e.bookChoice,o=e.chapterChoice;if(t){var c,a=h([n,o]),i=b(n,o,r);return c=r[0]===n&&r[1]===o?React.createElement("p",{className:"body__correct"},"CORRECT!",React.createElement("br",null),"+",i," points!"):r[0]===n?React.createElement("p",{className:"body__close"},"Close, you chose ",a,".",React.createElement("br",null),"+",i," points"):React.createElement("p",{className:"body__wrong"},"Wrong, you chose ",a),React.createElement("div",{className:"body"},React.createElement("h2",null,h(r)),React.createElement(C,{verseArray:r}),c)}return React.createElement("div",{className:"body"},React.createElement(C,{verseArray:r}))}function k(e){var t=function(e,t){return t.score-e.score},r=e.history.slice(),n=r.pop();r.sort(t);var o=r.slice(0,9);return o.push(n),o.sort(t),React.createElement("div",{className:"body"},React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null),React.createElement("th",null,"Score"),React.createElement("th",null,"Date"))),React.createElement("tbody",null,o.map(function(e,t){return React.createElement("tr",{key:t,style:(r=e,r.dateTimeString===n.dateTimeString?{color:"#23BD98"}:{})},React.createElement("td",null,t+1),React.createElement("td",{style:{textAlign:"right"}},e.score),React.createElement("td",null,e.dateTimeString));var r}))))}function C(e){var t=e.verseArray,r=function(e){var t=u(e,3),r=t[0],n=t[1],o=t[2];return 1===o?null:v([r,n,o-1])}(t),n=v(t),o=function(e){var t=u(e,3),r=t[0],n=t[1],o=t[2];return v([r,n,o+1])||null}(t);return React.createElement("p",null,r?React.createElement("span",{className:"body__context"},r+" "):null,React.createElement("span",null,n),o?React.createElement("span",{className:"body__context"}," "+o):null)}var g=["#EC6B34","#3C64DC","#55AEEE","#AE9BFB","#F59A2F"];function N(e){var t=e.bookChoice,r=e.chapterChoice,n=e.onClick,o=e.goBack;if(e.showHistory)return React.createElement("div",{className:"footer"},React.createElement(w,{color:"#5D4DC3",onClick:n},"Start New Quiz"));if(null===t)return React.createElement("div",{className:"footer"},React.createElement("p",{className:"footer__help"},"Which book is this verse from?"),React.createElement(w,{color:g[0],onClick:function(){return n(1)}},"Genesis"),React.createElement(w,{color:g[1],onClick:function(){return n(2)}},"Exodus"),React.createElement(w,{color:g[2],onClick:function(){return n(3)}},"Leviticus"),React.createElement(w,{color:g[3],onClick:function(){return n(4)}},"Numbers"),React.createElement(w,{color:g[4],onClick:function(){return n(5)}},"Deut."));if(null===r){var c=f[t-1],a=Array.apply(null,{length:c}).map(Number.call,Number),i=g[t-1];return React.createElement("div",{className:"footer"},React.createElement("p",{className:"footer__help"},"And which chapter?"),a.map(function(e){return React.createElement(w,{color:i,key:e,onClick:function(){return n(e+1)}},e+1)}),React.createElement(w,{color:"#999",onClick:o},"Back"))}return React.createElement("div",{className:"footer"},React.createElement(w,{color:"#5D4DC3",onClick:n},"Next Question"))}function w(e){var t=e.children,r=e.onClick,n=e.color;return React.createElement("div",{style:{backgroundColor:n},className:"button",onClick:r},t)}function S(){var e=function(e,t){try{return JSON.parse(localStorage.getItem("history"))}catch(e){return null}}();return null===e&&(e=[]),e}ReactDOM.render(React.createElement(d,{name:"Taylor"}),document.getElementById("app"))},function(e,t,r){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiQk9PS1MiLCJDSEFQVEVSU19QRVJfQk9PSyIsImdldFJhbmRvbVZlcnNlIiwiYm9va0luZGV4IiwiZ2V0UmFuZG9tSW50IiwiUEVOVEFURVVDSCIsImxlbmd0aCIsImNoYXB0ZXJzIiwiY2hhcHRlckluZGV4IiwidmVyc2VzIiwidmVyc2VUb0xhYmVsIiwidmVyc2VBcnJheSIsImJvb2tOdW0iLCJjaGFwdGVyIiwidmVyc2UiLCJfdmVyc2VBcnJheSIsIl9zbGljZWRUb0FycmF5IiwiYm9va051bVRvTGFiZWwiLCJfdmVyc2VBcnJheTIiLCJtYXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJnZXRQb2ludHMiLCJib29rQ2hvaWNlIiwiY2hhcHRlckNob2ljZSIsImFuc3dlclZlcnNlQXJyYXkiLCJwb2ludHMiLCJfYW5zd2VyVmVyc2VBcnJheSIsImJvb2tBbnN3ZXIiLCJjaGFwdGVyQW5zd2VyIiwiY2hhcHRlcnNPZmYiLCJhYnMiLCJnZXRWZXJzZVRleHQiLCJfdmVyc2VBcnJheTMiLCJjaGFwdGVyTnVtIiwidmVyc2VOdW0iLCJ1bmRlZmluZWQiLCJTdHJpbmciLCJBcHAiLCJwcm9wcyIsIl90aGlzIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9nZXRQcm90b3R5cGVPZiIsInN0YXRlIiwic2NvcmUiLCJxdWVzdGlvbk51bSIsImhpc3RvcnkiLCJsb2FkSGlzdG9yeSIsInNob3dIaXN0b3J5IiwicGlja0Jvb2siLCJfYXNzZXJ0VGhpc0luaXRpYWxpemVkIiwidW5kb0Jvb2tDaG9pY2UiLCJwaWNrQ2hhcHRlciIsIm5leHRRdWVzdGlvbiIsIm5leHRRdWl6IiwiUmVhY3QiLCJDb21wb25lbnQiLCJzZXRTdGF0ZSIsIm5ld1N0YXRlIiwiX29iamVjdFNwcmVhZCIsImRhdGFQb2ludCIsImRhdGVUaW1lU3RyaW5nIiwiRGF0ZSIsInRvTG9jYWxlU3RyaW5nIiwic2NvcmVzIiwicHVzaCIsImRhdGEiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlY29yZEhpc3RvcmljYWxTY29yZSIsIm9uQ2xpY2siLCJzaG93QW5zd2VyIiwiX3RoaXMkc3RhdGUiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiSGVhZGVyIiwicXVlc3Rpb25zUGVyUXVpeiIsIlNjb3JlQm9keSIsIkJvZHkiLCJGb290ZXIiLCJnb0JhY2siLCJfcmVmIiwiX3JlZjIiLCJyZXN1bHRMYWJlbCIsImNob2ljZSIsIlZlcnNlcyIsIl9yZWYzIiwiYnlTY29yZSIsImEiLCJiIiwicHJldmlvdXNTY29yZXMiLCJzbGljZSIsImN1cnJlbnQiLCJwb3AiLCJzb3J0IiwidG9wVGVuIiwibWFwIiwiaXRlbSIsInN0eWxlIiwiY29sb3IiLCJ0ZXh0QWxpZ24iLCJfcmVmNCIsInByZXZWZXJzZVRleHQiLCJfdmVyc2VBcnJheTQiLCJnZXRQcmV2VmVyc2UiLCJ2ZXJzZVRleHQiLCJuZXh0VmVyc2VUZXh0IiwiX3ZlcnNlQXJyYXk1IiwiZ2V0TmV4dFZlcnNlIiwiQk9PS19DT0xPUlMiLCJfcmVmNSIsIkJ0biIsIm51bUNoYXB0ZXJzIiwiQXJyYXkiLCJhcHBseSIsIk51bWJlciIsIl9yZWY2IiwiY2hpbGRyZW4iLCJiYWNrZ3JvdW5kQ29sb3IiLCJwYXJzZSIsImdldEl0ZW0iLCJfdW51c2VkIiwibG9jYWxMb2FkIiwiUmVhY3RET00iLCJyZW5kZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsR0FBQSxDQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFFBQUEsSUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsRUFBQSxDQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsWUFBQSxDQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9BQUEsS0FRakRyQixFQUFBc0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFBQUYsRUFBQXJCLEVBQUFxQixJQUNBLEVBQUFFLEVBQUEsT0FBQUYsRUFDQSxLQUFBRSxHQUFBLGlCQUFBRixRQUFBRyxXQUFBLE9BQUFILEVBQ0EsSUFBQUksRUFBQVgsT0FBQVksT0FBQSxNQUdBLEdBRkExQixFQUFBa0IsRUFBQU8sR0FDQVgsT0FBQUMsZUFBQVUsRUFBQSxXQUF5Q1QsWUFBQSxFQUFBSyxVQUN6QyxFQUFBRSxHQUFBLGlCQUFBRixFQUFBLFFB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S0FBTW9KLFFBQ3JFaEIsRUFBUVUsRUFBWXpGLEVBQWEsR0FDdkMsT0FDSWlDLE1BQUFvQixjQUFBLE9BQUtDLFVBQVUsVUFDWHJCLE1BQUFvQixjQUFBLEtBQUdDLFVBQVUsZ0JBQWIsc0JBQ0N2RSxFQUFTNkYsSUFBSSxTQUFBcEksR0FBQyxPQUFJeUYsTUFBQW9CLGNBQUNzQyxFQUFELENBQUtaLE1BQU9BLEVBQU9oSCxJQUFLdkIsRUFBRzBHLFFBQVMsa0JBQU1BLEVBQVExRyxFQUFJLEtBQUtBLEVBQUksS0FDbEZ5RixNQUFBb0IsY0FBQ3NDLEVBQUQsQ0FBS1osTUFBTyxPQUFRN0IsUUFBU1UsR0FBN0IsU0FJUixPQUNJM0IsTUFBQW9CLGNBQUEsT0FBS0MsVUFBVSxVQUNYckIsTUFBQW9CLGNBQUNzQyxFQUFELENBQUtaLE1BQU8sVUFBVzdCLFFBQVNBLEdBQWhDLGtCQU1oQixTQUFTeUMsRUFBVEssR0FBMEMsSUFBM0JDLEVBQTJCRCxFQUEzQkMsU0FBVS9DLEVBQWlCOEMsRUFBakI5QyxRQUFTNkIsRUFBUWlCLEVBQVJqQixNQUM5QixPQUFPOUMsTUFBQW9CLGNBQUEsT0FBS3lCLE1BQU8sQ0FBQ29CLGdCQUFpQm5CLEdBQVF6QixVQUFVLFNBQVNKLFFBQVNBLEdBQVUrQyxHQVl2RixTQUFTeEUsSUFDTCxJQUFJaUIsRUFXUixTQUFtQjNFLEVBQUs2RSxHQUNwQixJQUNJLE9BQU9HLEtBQUtvRCxNQUFNdEQsYUFBYXVELFFBQVEsWUFDekMsTUFBQUMsR0FDRSxPQUFPLE1BZkVDLEdBSWIsT0FIZSxPQUFYNUQsSUFDQUEsRUFBUyxJQUVOQSxFQWVYNkQsU0FBU0MsT0FDUHZFLE1BQUFvQixjQUFDdEMsRUFBRCxDQUFLaEUsS0FBSyxXQUNWMEosU0FBU0MsZUFBZSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9kaXN0L1wiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgXCIuL2luZGV4LnNjc3NcIjtcblxuY29uc3QgUVVFU1RJT05TX1BFUl9RVUlaID0gMTtcblxuY29uc3QgQk9PS1MgPSBbJ0dlbmVzaXMnLCAnRXhvZHVzJywgJ0xldml0aWN1cycsICdOdW1iZXJzJywgJ0RldXRlcm9ub215J107XG5cbmNvbnN0IENIQVBURVJTX1BFUl9CT09LID0gWzUwLCA0MCwgMjcsIDM2LCAzNF07XG5cbmZ1bmN0aW9uIGdldFJhbmRvbVZlcnNlKCkge1xuICAgIC8vIFRPRE86IHJldmlldyB0byBtYWtlIHN1cmUgd2UgZG9uJ3QgaGF2ZSBvZmYtYnktb25lIGVycm9yc1xuICAgIGNvbnN0IGJvb2tJbmRleCA9IGdldFJhbmRvbUludChQRU5UQVRFVUNILmxlbmd0aCk7XG4gICAgY29uc3QgY2hhcHRlcnMgPSBQRU5UQVRFVUNIW2Jvb2tJbmRleF0uY2hhcHRlcnM7XG4gICAgY29uc3QgY2hhcHRlckluZGV4ID0gZ2V0UmFuZG9tSW50KGNoYXB0ZXJzLmxlbmd0aCk7XG4gICAgY29uc3QgdmVyc2VzID0gY2hhcHRlcnNbY2hhcHRlckluZGV4XS52ZXJzZXM7XG4gICAgY29uc3QgdmVyc2VJbmRleCA9IGdldFJhbmRvbUludCh2ZXJzZXMubGVuZ3RoKVxuICAgIHJldHVybiBbYm9va0luZGV4ICsgMSwgY2hhcHRlckluZGV4ICsgMSwgdmVyc2VJbmRleCArIDFdXG59XG5cbmZ1bmN0aW9uIHZlcnNlVG9MYWJlbCh2ZXJzZUFycmF5KSB7XG4gICAgbGV0IGJvb2tOdW0sIGNoYXB0ZXIsIHZlcnNlO1xuICAgIGlmICh2ZXJzZUFycmF5Lmxlbmd0aCA9PT0gMykge1xuICAgICAgICBbYm9va051bSwgY2hhcHRlciwgdmVyc2VdID0gdmVyc2VBcnJheTtcbiAgICAgICAgcmV0dXJuIGJvb2tOdW1Ub0xhYmVsKGJvb2tOdW0pICsgJyAnICsgY2hhcHRlciArICcuJyArIHZlcnNlO1xuICAgIH0gZWxzZSBpZiAodmVyc2VBcnJheS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgW2Jvb2tOdW0sIGNoYXB0ZXJdID0gdmVyc2VBcnJheTtcbiAgICAgICAgcmV0dXJuIGJvb2tOdW1Ub0xhYmVsKGJvb2tOdW0pICsgJyAnICsgY2hhcHRlcjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGJvb2tOdW1Ub0xhYmVsKGJvb2tOdW0pIHtcbiAgICByZXR1cm4gQk9PS1NbYm9va051bSAtIDFdO1xufVxuXG5mdW5jdGlvbiBnZXRSYW5kb21JbnQobWF4KSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIE1hdGguZmxvb3IobWF4KSk7XG59XG5cbmZ1bmN0aW9uIGdldFBvaW50cyhib29rQ2hvaWNlLCBjaGFwdGVyQ2hvaWNlLCBhbnN3ZXJWZXJzZUFycmF5KSB7XG4gICAgbGV0IHBvaW50cyA9IDA7XG4gICAgY29uc3QgW2Jvb2tBbnN3ZXIsIGNoYXB0ZXJBbnN3ZXIsIF9dID0gYW5zd2VyVmVyc2VBcnJheTtcbiAgICBpZiAoYm9va0Nob2ljZSA9PT0gYm9va0Fuc3dlcikge1xuICAgICAgICBwb2ludHMgKz0gMTA7XG4gICAgICAgIGNvbnN0IGNoYXB0ZXJzT2ZmID0gTWF0aC5hYnMoY2hhcHRlckNob2ljZSAtIGNoYXB0ZXJBbnN3ZXIpO1xuICAgICAgICBpZiAoY2hhcHRlcnNPZmYgPT09IDApIHtcbiAgICAgICAgICAgIHBvaW50cyArPSA5MDtcbiAgICAgICAgfSBlbHNlIGlmIChjaGFwdGVyc09mZiA8PSA1KSB7XG4gICAgICAgICAgICBwb2ludHMgKz0gKDYwIC0gMTAqY2hhcHRlcnNPZmYpXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBvaW50cztcbn1cblxuZnVuY3Rpb24gZ2V0VmVyc2VUZXh0KHZlcnNlQXJyYXkpIHtcbiAgICBjb25zdCBbYm9va051bSwgY2hhcHRlck51bSwgdmVyc2VOdW1dID0gdmVyc2VBcnJheTtcbiAgICBjb25zdCBib29rID0gUEVOVEFURVVDSFtib29rTnVtIC0gMV07XG4gICAgY29uc3QgY2hhcHRlciA9IGJvb2suY2hhcHRlcnNbY2hhcHRlck51bSAtIDFdXG4gICAgY29uc3QgdmVyc2UgPSBjaGFwdGVyLnZlcnNlc1t2ZXJzZU51bSAtIDFdO1xuICAgIGlmICh2ZXJzZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB2ZXJzZVtTdHJpbmcodmVyc2VOdW0pXTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZsYXRBcnJheXNFcXVhbChhLCBiKSB7XG4gICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoYVtpXSAhPT0gYltpXSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5cbmNsYXNzIEFwcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc2NvcmU6IDAsXG4gICAgICAgICAgICBxdWVzdGlvbk51bTogMCxcbiAgICAgICAgICAgIHZlcnNlOiBnZXRSYW5kb21WZXJzZSgpLFxuICAgICAgICAgICAgYm9va0Nob2ljZTogbnVsbCxcbiAgICAgICAgICAgIGNoYXB0ZXJDaG9pY2U6IG51bGwsXG4gICAgICAgICAgICBoaXN0b3J5OiBsb2FkSGlzdG9yeSgpLFxuICAgICAgICAgICAgc2hvd0hpc3Rvcnk6IGZhbHNlLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnBpY2tCb29rID0gdGhpcy5waWNrQm9vay5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnVuZG9Cb29rQ2hvaWNlID0gdGhpcy51bmRvQm9va0Nob2ljZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnBpY2tDaGFwdGVyID0gdGhpcy5waWNrQ2hhcHRlci5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm5leHRRdWVzdGlvbiA9IHRoaXMubmV4dFF1ZXN0aW9uLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubmV4dFF1aXogPSB0aGlzLm5leHRRdWl6LmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgcGlja0Jvb2soYm9va0Nob2ljZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtib29rQ2hvaWNlfSk7XG4gICAgfVxuXG4gICAgdW5kb0Jvb2tDaG9pY2UoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2Jvb2tDaG9pY2U6IG51bGx9KTtcbiAgICB9XG5cbiAgICBwaWNrQ2hhcHRlcihjaGFwdGVyQ2hvaWNlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwb2ludHMgPSBnZXRQb2ludHMoc3RhdGUuYm9va0Nob2ljZSwgY2hhcHRlckNob2ljZSwgc3RhdGUudmVyc2UpXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGNoYXB0ZXJDaG9pY2UsXG4gICAgICAgICAgICAgICAgcXVlc3Rpb25OdW06IHN0YXRlLnF1ZXN0aW9uTnVtICsgMSxcbiAgICAgICAgICAgICAgICBzY29yZTogc3RhdGUuc2NvcmUgKyBwb2ludHMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBuZXh0UXVlc3Rpb24oKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICAgICAgICB2ZXJzZTogZ2V0UmFuZG9tVmVyc2UoKSxcbiAgICAgICAgICAgICAgICBib29rQ2hvaWNlOiBudWxsLFxuICAgICAgICAgICAgICAgIGNoYXB0ZXJDaG9pY2U6IG51bGwsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHN0YXRlLnF1ZXN0aW9uTnVtID09PSBRVUVTVElPTlNfUEVSX1FVSVopIHtcbiAgICAgICAgICAgICAgICBsZXQgZGF0YVBvaW50ID0gcmVjb3JkSGlzdG9yaWNhbFNjb3JlKHN0YXRlLnNjb3JlKTtcbiAgICAgICAgICAgICAgICBuZXdTdGF0ZS5oaXN0b3J5LnB1c2goZGF0YVBvaW50KTtcbiAgICAgICAgICAgICAgICBuZXdTdGF0ZS5zY29yZSA9IDA7XG4gICAgICAgICAgICAgICAgbmV3U3RhdGUucXVlc3Rpb25OdW0gPSAwO1xuICAgICAgICAgICAgICAgIG5ld1N0YXRlLnNob3dIaXN0b3J5ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgbmV4dFF1aXooKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Nob3dIaXN0b3J5OiBmYWxzZX0pO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3Qge3Njb3JlLCBxdWVzdGlvbk51bSwgdmVyc2UsIGJvb2tDaG9pY2UsIGNoYXB0ZXJDaG9pY2UsIHNob3dIaXN0b3J5LCBoaXN0b3J5fSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGxldCBvbkNsaWNrO1xuICAgICAgICBsZXQgc2hvd0Fuc3dlcjtcbiAgICAgICAgaWYgKHNob3dIaXN0b3J5KSB7XG4gICAgICAgICAgICBvbkNsaWNrID0gdGhpcy5uZXh0UXVpejtcbiAgICAgICAgfSBlbHNlIGlmIChib29rQ2hvaWNlID09PSBudWxsKSB7XG4gICAgICAgICAgICBvbkNsaWNrID0gdGhpcy5waWNrQm9vaztcbiAgICAgICAgICAgIHNob3dBbnN3ZXIgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmIChjaGFwdGVyQ2hvaWNlID09PSBudWxsKSB7XG4gICAgICAgICAgICBvbkNsaWNrID0gdGhpcy5waWNrQ2hhcHRlcjtcbiAgICAgICAgICAgIHNob3dBbnN3ZXIgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9uQ2xpY2sgPSB0aGlzLm5leHRRdWVzdGlvbjtcbiAgICAgICAgICAgIHNob3dBbnN3ZXIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFwcFwiPlxuICAgICAgICAgICAgICAgIDxIZWFkZXIgc2NvcmU9e3Njb3JlfSBxdWVzdGlvbk51bT17cXVlc3Rpb25OdW19IHF1ZXN0aW9uc1BlclF1aXo9e1FVRVNUSU9OU19QRVJfUVVJWn0gLz5cbiAgICAgICAgICAgICAgICB7c2hvd0hpc3RvcnkgP1xuICAgICAgICAgICAgICAgICAgICA8U2NvcmVCb2R5IGhpc3Rvcnk9e2hpc3Rvcnl9IC8+IDpcbiAgICAgICAgICAgICAgICAgICAgPEJvZHkgc2hvd0Fuc3dlcj17c2hvd0Fuc3dlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJzZT17dmVyc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9va0Nob2ljZT17Ym9va0Nob2ljZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFwdGVyQ2hvaWNlPXtjaGFwdGVyQ2hvaWNlfSAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA8Rm9vdGVyIGJvb2tDaG9pY2U9e2Jvb2tDaG9pY2V9XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFwdGVyQ2hvaWNlPXtjaGFwdGVyQ2hvaWNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17b25DbGlja31cbiAgICAgICAgICAgICAgICAgICAgICAgIGdvQmFjaz17dGhpcy51bmRvQm9va0Nob2ljZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dIaXN0b3J5PXtzaG93SGlzdG9yeX0gLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gSGVhZGVyICh7c2NvcmUsIHF1ZXN0aW9uTnVtLCBxdWVzdGlvbnNQZXJRdWl6fSkge1xuICAgIC8vIFRPRE86IGdldCBnbG93IGFuaW1hdGlvbiB0byByZXRyaWdnZXJcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlclwiPlxuICAgICAgICAgICAgPGgyPlBlbnRhdGV1Y2ggUXVpejwvaDI+XG4gICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwiZ2xvd1wiPlNDT1JFOiB7c2NvcmV9PC9oMj5cbiAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJnbG93XCI+e3F1ZXN0aW9uTnVtfS97cXVlc3Rpb25zUGVyUXVpen08L2gyPlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufVxuXG5cbmZ1bmN0aW9uIEJvZHkgKHtzaG93QW5zd2VyLCB2ZXJzZSwgYm9va0Nob2ljZSwgY2hhcHRlckNob2ljZX0pIHtcbiAgICBpZiAoc2hvd0Fuc3dlcikge1xuICAgICAgICBsZXQgcmVzdWx0TGFiZWw7XG4gICAgICAgIGNvbnN0IGNob2ljZSA9IHZlcnNlVG9MYWJlbChbYm9va0Nob2ljZSwgY2hhcHRlckNob2ljZV0pO1xuICAgICAgICBjb25zdCBwb2ludHMgPSBnZXRQb2ludHMoYm9va0Nob2ljZSwgY2hhcHRlckNob2ljZSwgdmVyc2UpO1xuICAgICAgICBpZiAodmVyc2VbMF0gPT09IGJvb2tDaG9pY2UgJiYgdmVyc2VbMV0gPT09IGNoYXB0ZXJDaG9pY2UpIHtcbiAgICAgICAgICAgIHJlc3VsdExhYmVsID0gPHAgY2xhc3NOYW1lPVwiYm9keV9fY29ycmVjdFwiPkNPUlJFQ1QhPGJyIC8+K3twb2ludHN9IHBvaW50cyE8L3A+O1xuICAgICAgICB9IGVsc2UgaWYgKHZlcnNlWzBdID09PSBib29rQ2hvaWNlKSB7XG4gICAgICAgICAgICByZXN1bHRMYWJlbCA9IDxwIGNsYXNzTmFtZT1cImJvZHlfX2Nsb3NlXCI+Q2xvc2UsIHlvdSBjaG9zZSB7Y2hvaWNlfS48YnIgLz4re3BvaW50c30gcG9pbnRzPC9wPjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdExhYmVsID0gPHAgY2xhc3NOYW1lPVwiYm9keV9fd3JvbmdcIj5Xcm9uZywgeW91IGNob3NlIHtjaG9pY2V9PC9wPjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJib2R5XCI+XG4gICAgICAgICAgICAgICAgPGgyPnt2ZXJzZVRvTGFiZWwodmVyc2UpfTwvaDI+XG4gICAgICAgICAgICAgICAgPFZlcnNlcyB2ZXJzZUFycmF5PXt2ZXJzZX0gLz5cbiAgICAgICAgICAgICAgICB7cmVzdWx0TGFiZWx9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJib2R5XCI+XG4gICAgICAgICAgICAgICAgPFZlcnNlcyB2ZXJzZUFycmF5PXt2ZXJzZX0gLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gU2NvcmVCb2R5ICh7aGlzdG9yeX0pIHtcbiAgICBjb25zdCBieVNjb3JlID0gKGEsIGIpID0+IGIuc2NvcmUgLSBhLnNjb3JlO1xuICAgIGNvbnN0IHByZXZpb3VzU2NvcmVzID0gaGlzdG9yeS5zbGljZSgpO1xuICAgIGNvbnN0IGN1cnJlbnQgPSBwcmV2aW91c1Njb3Jlcy5wb3AoKTsgIC8vIGN1cnJlbnQgc2NvcmUgaXMgb24gZW5kXG4gICAgY29uc3QgaXNDdXJyZW50ID0gKGEpID0+IGEuZGF0ZVRpbWVTdHJpbmcgPT09IGN1cnJlbnQuZGF0ZVRpbWVTdHJpbmc7XG4gICAgcHJldmlvdXNTY29yZXMuc29ydChieVNjb3JlKTtcbiAgICBjb25zdCB0b3BUZW4gPSBwcmV2aW91c1Njb3Jlcy5zbGljZSgwLCA5KTtcbiAgICB0b3BUZW4ucHVzaChjdXJyZW50KTtcbiAgICB0b3BUZW4uc29ydChieVNjb3JlKTtcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvZHlcIj5cbiAgICAgICAgICAgIDx0YWJsZT5cbiAgICAgICAgICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aD48L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlNjb3JlPC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5EYXRlPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAgICAge3RvcFRlbi5tYXAoKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGtleT17aX0gc3R5bGU9e2lzQ3VycmVudChpdGVtKSA/IHtjb2xvcjogJyMyM0JEOTgnfToge319PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e2kgKyAxfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogJ3JpZ2h0J319PntpdGVtLnNjb3JlfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD57aXRlbS5kYXRlVGltZVN0cmluZ308L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn1cblxuZnVuY3Rpb24gVmVyc2VzKHt2ZXJzZUFycmF5fSkge1xuICAgIGNvbnN0IHByZXZWZXJzZVRleHQgPSBnZXRQcmV2VmVyc2UodmVyc2VBcnJheSk7XG4gICAgY29uc3QgdmVyc2VUZXh0ID0gZ2V0VmVyc2VUZXh0KHZlcnNlQXJyYXkpO1xuICAgIGNvbnN0IG5leHRWZXJzZVRleHQgPSBnZXROZXh0VmVyc2UodmVyc2VBcnJheSk7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPHA+XG4gICAgICAgICAgICB7cHJldlZlcnNlVGV4dCA/IDxzcGFuIGNsYXNzTmFtZT1cImJvZHlfX2NvbnRleHRcIj57cHJldlZlcnNlVGV4dCArICcgJ308L3NwYW4+IDogbnVsbH1cbiAgICAgICAgICAgIDxzcGFuPnt2ZXJzZVRleHR9PC9zcGFuPlxuICAgICAgICAgICAge25leHRWZXJzZVRleHQgPyA8c3BhbiBjbGFzc05hbWU9XCJib2R5X19jb250ZXh0XCI+eycgJyArIG5leHRWZXJzZVRleHR9PC9zcGFuPiA6IG51bGx9XG4gICAgICAgIDwvcD5cbiAgICApO1xufVxuXG5mdW5jdGlvbiBnZXRQcmV2VmVyc2UodmVyc2VBcnJheSkge1xuICAgIGNvbnN0IFtib29rTnVtLCBjaGFwdGVyTnVtLCB2ZXJzZU51bV0gPSB2ZXJzZUFycmF5O1xuICAgIGlmICh2ZXJzZU51bSA9PT0gMSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZ2V0VmVyc2VUZXh0KFtib29rTnVtLCBjaGFwdGVyTnVtLCB2ZXJzZU51bSAtIDFdKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldE5leHRWZXJzZSh2ZXJzZUFycmF5KSB7XG4gICAgY29uc3QgW2Jvb2tOdW0sIGNoYXB0ZXJOdW0sIHZlcnNlTnVtXSA9IHZlcnNlQXJyYXk7XG4gICAgLy8gcmVsaWVzIG9uIGBnZXRWZXJzZVRleHRgIHJldHVybiB1bmRlZmluZWQgaWYgaXQgaXMgdGhlIGxhc3QgdmVyc2UgaW4gYSBjaGFwdGVyXG4gICAgcmV0dXJuIGdldFZlcnNlVGV4dChbYm9va051bSwgY2hhcHRlck51bSwgdmVyc2VOdW0gKyAxXSkgfHwgbnVsbDtcbn1cblxuY29uc3QgQk9PS19DT0xPUlMgPSBbJyNFQzZCMzQnLCAnIzNDNjREQycsICcjNTVBRUVFJywgJyNBRTlCRkInLCAnI0Y1OUEyRiddO1xuXG5mdW5jdGlvbiBGb290ZXIgKHtib29rQ2hvaWNlLCBjaGFwdGVyQ2hvaWNlLCBvbkNsaWNrLCBnb0JhY2ssIHNob3dIaXN0b3J5fSkge1xuICAgIGlmIChzaG93SGlzdG9yeSkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb290ZXJcIj5cbiAgICAgICAgICAgICAgICA8QnRuIGNvbG9yPXsnIzVENERDMyd9IG9uQ2xpY2s9e29uQ2xpY2t9PlN0YXJ0IE5ldyBRdWl6PC9CdG4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGJvb2tDaG9pY2UgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9vdGVyXCI+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9vdGVyX19oZWxwXCI+V2hpY2ggYm9vayBpcyB0aGlzIHZlcnNlIGZyb20/PC9wPlxuICAgICAgICAgICAgICAgIDxCdG4gY29sb3I9e0JPT0tfQ09MT1JTWzBdfSBvbkNsaWNrPXsoKSA9PiBvbkNsaWNrKDEpfT5HZW5lc2lzPC9CdG4+XG4gICAgICAgICAgICAgICAgPEJ0biBjb2xvcj17Qk9PS19DT0xPUlNbMV19IG9uQ2xpY2s9eygpID0+IG9uQ2xpY2soMil9PkV4b2R1czwvQnRuPlxuICAgICAgICAgICAgICAgIDxCdG4gY29sb3I9e0JPT0tfQ09MT1JTWzJdfSBvbkNsaWNrPXsoKSA9PiBvbkNsaWNrKDMpfT5MZXZpdGljdXM8L0J0bj5cbiAgICAgICAgICAgICAgICA8QnRuIGNvbG9yPXtCT09LX0NPTE9SU1szXX0gb25DbGljaz17KCkgPT4gb25DbGljayg0KX0+TnVtYmVyczwvQnRuPlxuICAgICAgICAgICAgICAgIDxCdG4gY29sb3I9e0JPT0tfQ09MT1JTWzRdfSBvbkNsaWNrPXsoKSA9PiBvbkNsaWNrKDUpfT5EZXV0LjwvQnRuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfSBlbHNlIGlmIChjaGFwdGVyQ2hvaWNlID09PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IG51bUNoYXB0ZXJzID0gQ0hBUFRFUlNfUEVSX0JPT0tbYm9va0Nob2ljZSAtIDFdO1xuICAgICAgICBjb25zdCBjaGFwdGVycyA9IEFycmF5LmFwcGx5KG51bGwsIHtsZW5ndGg6IG51bUNoYXB0ZXJzfSkubWFwKE51bWJlci5jYWxsLCBOdW1iZXIpO1xuICAgICAgICBjb25zdCBjb2xvciA9IEJPT0tfQ09MT1JTW2Jvb2tDaG9pY2UgLSAxXTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9vdGVyXCI+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9vdGVyX19oZWxwXCI+QW5kIHdoaWNoIGNoYXB0ZXI/PC9wPlxuICAgICAgICAgICAgICAgIHtjaGFwdGVycy5tYXAoaSA9PiA8QnRuIGNvbG9yPXtjb2xvcn0ga2V5PXtpfSBvbkNsaWNrPXsoKSA9PiBvbkNsaWNrKGkgKyAxKX0+e2kgKyAxfTwvQnRuPil9XG4gICAgICAgICAgICAgICAgPEJ0biBjb2xvcj17XCIjOTk5XCJ9IG9uQ2xpY2s9e2dvQmFja30+QmFjazwvQnRuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9vdGVyXCI+XG4gICAgICAgICAgICAgICAgPEJ0biBjb2xvcj17JyM1RDREQzMnfSBvbkNsaWNrPXtvbkNsaWNrfT5OZXh0IFF1ZXN0aW9uPC9CdG4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEJ0biAoe2NoaWxkcmVuLCBvbkNsaWNrLCBjb2xvcn0pIHtcbiAgICByZXR1cm4gPGRpdiBzdHlsZT17e2JhY2tncm91bmRDb2xvcjogY29sb3J9fSBjbGFzc05hbWU9XCJidXR0b25cIiBvbkNsaWNrPXtvbkNsaWNrfT57Y2hpbGRyZW59PC9kaXY+XG59XG5cbmZ1bmN0aW9uIHJlY29yZEhpc3RvcmljYWxTY29yZShzY29yZSkge1xuICAgIGNvbnN0IGRhdGVUaW1lU3RyaW5nID0gbmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygpO1xuICAgIGNvbnN0IHNjb3JlcyA9IGxvYWRIaXN0b3J5KCk7XG4gICAgY29uc3QgZGF0YVBvaW50ID0ge2RhdGVUaW1lU3RyaW5nLCBzY29yZX07XG4gICAgc2NvcmVzLnB1c2goZGF0YVBvaW50KTtcbiAgICBsb2NhbFNhdmUoJ2hpc3RvcnknLCBzY29yZXMpO1xuICAgIHJldHVybiBkYXRhUG9pbnQ7XG59XG5cbmZ1bmN0aW9uIGxvYWRIaXN0b3J5KCkge1xuICAgIGxldCBzY29yZXMgPSBsb2NhbExvYWQoJ2hpc3RvcnknKTtcbiAgICBpZiAoc2NvcmVzID09PSBudWxsKSB7XG4gICAgICAgIHNjb3JlcyA9IFtdO1xuICAgIH1cbiAgICByZXR1cm4gc2NvcmVzO1xufVxuXG5mdW5jdGlvbiBsb2NhbFNhdmUoa2V5LCBkYXRhKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XG59XG5cbmZ1bmN0aW9uIGxvY2FsTG9hZChrZXksIGRhdGEpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaGlzdG9yeScpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG5SZWFjdERPTS5yZW5kZXIoXG4gIDxBcHAgbmFtZT1cIlRheWxvclwiIC8+LFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXBwJylcbik7XG4iXSwic291cmNlUm9vdCI6IiJ9
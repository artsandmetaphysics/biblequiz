!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);r(1);function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,c=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw c}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var f=["Genesis","Exodus","Leviticus","Numbers","Deuteronomy"],m=[50,40,27,36,34];function h(){var e=b(PENTATEUCH.length),t=PENTATEUCH[e].chapters,r=b(t.length);return[e+1,r+1,b(t[r].verses.length)+1]}function p(e){var t,r,n;if(3===e.length){var o=s(e,3);return t=o[0],r=o[1],n=o[2],y(t)+" "+r+"."+n}if(2===e.length){var c=s(e,2);return t=c[0],r=c[1],y(t)+" "+r}}function y(e){return f[e-1]}function b(e){return Math.floor(Math.random()*Math.floor(e))}function v(e,t,r){var n=0,o=s(r,3),c=o[0],a=o[1];o[2];if(e===c){n+=10;var i=Math.abs(t-a);0===i?n+=90:i<=5&&(n+=60-10*i)}return n}function d(e){var t=s(e,3),r=t[0],n=t[1],o=t[2],c=PENTATEUCH[r-1].chapters[n-1].verses[o-1];return void 0===c?null:c[String(o)]}var E=function(e){function t(e){var r,n,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(c=i(t).call(this,e))||"object"!==o(c)&&"function"!=typeof c?l(n):c).state={score:0,questionNum:0,verse:h(),bookChoice:null,chapterChoice:null,history:S(),showHistory:!1},r.pickBook=r.pickBook.bind(l(r)),r.undoBookChoice=r.undoBookChoice.bind(l(r)),r.pickChapter=r.pickChapter.bind(l(r)),r.nextQuestion=r.nextQuestion.bind(l(r)),r.nextQuiz=r.nextQuiz.bind(l(r)),r}var r,n,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,React.Component),r=t,(n=[{key:"pickBook",value:function(e){this.setState({bookChoice:e})}},{key:"undoBookChoice",value:function(){this.setState({bookChoice:null})}},{key:"pickChapter",value:function(e){this.setState(function(t){var r=v(t.bookChoice,e,t.verse);return{chapterChoice:e,questionNum:t.questionNum+1,score:t.score+r}})}},{key:"nextQuestion",value:function(){this.setState(function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){c(e,t,r[t])})}return e}({},e,{verse:h(),bookChoice:null,chapterChoice:null});if(10===e.questionNum){var r=function(e){var t=(new Date).toLocaleString(),r=S(),n={dateTimeString:t,score:e};return r.push(n),o="history",c=r,localStorage.setItem(o,JSON.stringify(c)),n;var o,c}(e.score);t.history.push(r),t.score=0,t.questionNum=0,t.showHistory=!0}return t})}},{key:"nextQuiz",value:function(){this.setState({showHistory:!1})}},{key:"render",value:function(){var e,t,r=this.state,n=r.score,o=r.questionNum,c=r.verse,a=r.bookChoice,i=r.chapterChoice,l=r.showHistory,u=r.history;return l?e=this.nextQuiz:null===a?(e=this.pickBook,t=!1):null===i?(e=this.pickChapter,t=!1):(e=this.nextQuestion,t=!0),React.createElement("div",{className:"app"},React.createElement(R,{score:n,questionNum:o,questionsPerQuiz:10}),l?React.createElement(C,{history:u}):React.createElement(k,{showAnswer:t,verse:c,bookChoice:a,chapterChoice:i}),React.createElement(w,{bookChoice:a,chapterChoice:i,onClick:e,goBack:this.undoBookChoice,showHistory:l}))}}])&&a(r.prototype,n),s&&a(r,s),t}();function R(e){var t=e.score,r=e.questionNum,n=e.questionsPerQuiz;return React.createElement("div",{className:"header"},React.createElement("h2",null,"Pentateuch Quiz"),React.createElement("h2",{className:"glow"},"SCORE: ",t),React.createElement("h2",{className:"glow"},r,"/",n))}function k(e){var t=e.showAnswer,r=e.verse,n=e.bookChoice,o=e.chapterChoice;if(t){var c,a=p([n,o]),i=v(n,o,r);return c=r[0]===n&&r[1]===o?React.createElement("p",{className:"body__correct"},"CORRECT!",React.createElement("br",null),"+",i," points!"):r[0]===n?React.createElement("p",{className:"body__close"},"Close, you chose ",a,".",React.createElement("br",null),"+",i," points"):React.createElement("p",{className:"body__wrong"},"Wrong, you chose ",a),React.createElement("div",{className:"body"},React.createElement("h2",null,p(r)),React.createElement(g,{verseArray:r}),c)}return React.createElement("div",{className:"body"},React.createElement(g,{verseArray:r}))}function C(e){var t=n(e.history).sort(function(e){return-e.score}).filter(function(e){return e.score>0}).slice(0,10);return React.createElement("div",{className:"body"},React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null),React.createElement("th",null,"Score"),React.createElement("th",null,"Date"))),React.createElement("tbody",null,t.map(function(e,t){return React.createElement("tr",{key:t},React.createElement("td",null,t+1),React.createElement("td",null,e.score),React.createElement("td",null,e.dateTimeString))}))))}function g(e){var t=e.verseArray,r=function(e){var t=s(e,3),r=t[0],n=t[1],o=t[2];return 1===o?null:d([r,n,o-1])}(t),n=d(t),o=function(e){var t=s(e,3),r=t[0],n=t[1],o=t[2];return d([r,n,o+1])||null}(t);return React.createElement("p",null,r?React.createElement("span",{className:"body__context"},r+" "):null,React.createElement("span",null,n),o?React.createElement("span",{className:"body__context"}," "+o):null)}var N=["#EC6B34","#3C64DC","#55AEEE","#AE9BFB","#F59A2F"];function w(e){var t=e.bookChoice,r=e.chapterChoice,n=e.onClick,o=e.goBack;if(e.showHistory)return React.createElement("div",{className:"footer"},React.createElement(O,{color:"#5D4DC3",onClick:n},"Start New Quiz"));if(null===t)return React.createElement("div",{className:"footer"},React.createElement("p",{className:"footer__help"},"Which book is this verse from?"),React.createElement(O,{color:N[0],onClick:function(){return n(1)}},"Genesis"),React.createElement(O,{color:N[1],onClick:function(){return n(2)}},"Exodus"),React.createElement(O,{color:N[2],onClick:function(){return n(3)}},"Leviticus"),React.createElement(O,{color:N[3],onClick:function(){return n(4)}},"Numbers"),React.createElement(O,{color:N[4],onClick:function(){return n(5)}},"Deut."));if(null===r){var c=m[t-1],a=Array.apply(null,{length:c}).map(Number.call,Number),i=N[t-1];return React.createElement("div",{className:"footer"},React.createElement("p",{className:"footer__help"},"And which chapter?"),a.map(function(e){return React.createElement(O,{color:i,key:e,onClick:function(){return n(e+1)}},e+1)}),React.createElement(O,{color:"#999",onClick:o},"Back"))}return React.createElement("div",{className:"footer"},React.createElement(O,{color:"#5D4DC3",onClick:n},"Next Question"))}function O(e){var t=e.children,r=e.onClick,n=e.color;return React.createElement("div",{style:{backgroundColor:n},className:"button",onClick:r},t)}function S(){var e=function(e,t){try{return JSON.parse(localStorage.getItem("history"))}catch(e){return null}}();return null===e&&(e=[]),e}ReactDOM.render(React.createElement(E,{name:"Taylor"}),document.getElementById("app"))},function(e,t,r){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiQk9PS1MiLCJDSEFQVEVSU19QRVJfQk9PSyIsImdldFJhbmRvbVZlcnNlIiwiYm9va0luZGV4IiwiZ2V0UmFuZG9tSW50IiwiUEVOVEFURVVDSCIsImxlbmd0aCIsImNoYXB0ZXJzIiwiY2hhcHRlckluZGV4IiwidmVyc2VzIiwidmVyc2VUb0xhYmVsIiwidmVyc2VBcnJheSIsImJvb2tOdW0iLCJjaGFwdGVyIiwidmVyc2UiLCJfdmVyc2VBcnJheSIsIl9zbGljZWRUb0FycmF5IiwiYm9va051bVRvTGFiZWwiLCJfdmVyc2VBcnJheTIiLCJtYXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJnZXRQb2ludHMiLCJib29rQ2hvaWNlIiwiY2hhcHRlckNob2ljZSIsImFuc3dlclZlcnNlQXJyYXkiLCJwb2ludHMiLCJfYW5zd2VyVmVyc2VBcnJheSIsImJvb2tBbnN3ZXIiLCJjaGFwdGVyQW5zd2VyIiwiY2hhcHRlcnNPZmYiLCJhYnMiLCJnZXRWZXJzZVRleHQiLCJfdmVyc2VBcnJheTMiLCJjaGFwdGVyTnVtIiwidmVyc2VOdW0iLCJ1bmRlZmluZWQiLCJTdHJpbmciLCJBcHAiLCJwcm9wcyIsIl90aGlzIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9nZXRQcm90b3R5cGVPZiIsInN0YXRlIiwic2NvcmUiLCJxdWVzdGlvbk51bSIsImhpc3RvcnkiLCJsb2FkSGlzdG9yeSIsInNob3dIaXN0b3J5IiwicGlja0Jvb2siLCJfYXNzZXJ0VGhpc0luaXRpYWxpemVkIiwidW5kb0Jvb2tDaG9pY2UiLCJwaWNrQ2hhcHRlciIsIm5leHRRdWVzdGlvbiIsIm5leHRRdWl6IiwiUmVhY3QiLCJDb21wb25lbnQiLCJzZXRTdGF0ZSIsIm5ld1N0YXRlIiwiX29iamVjdFNwcmVhZCIsImRhdGFQb2ludCIsImRhdGVUaW1lU3RyaW5nIiwiRGF0ZSIsInRvTG9jYWxlU3RyaW5nIiwic2NvcmVzIiwicHVzaCIsImRhdGEiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlY29yZEhpc3RvcmljYWxTY29yZSIsIm9uQ2xpY2siLCJzaG93QW5zd2VyIiwiX3RoaXMkc3RhdGUiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiSGVhZGVyIiwicXVlc3Rpb25zUGVyUXVpeiIsIlNjb3JlQm9keSIsIkJvZHkiLCJGb290ZXIiLCJnb0JhY2siLCJfcmVmIiwiX3JlZjIiLCJyZXN1bHRMYWJlbCIsImNob2ljZSIsIlZlcnNlcyIsIl9yZWYzIiwidG9wVGVuIiwiX3RvQ29uc3VtYWJsZUFycmF5Iiwic29ydCIsImgiLCJmaWx0ZXIiLCJzbGljZSIsIm1hcCIsIml0ZW0iLCJfcmVmNCIsInByZXZWZXJzZVRleHQiLCJfdmVyc2VBcnJheTQiLCJnZXRQcmV2VmVyc2UiLCJ2ZXJzZVRleHQiLCJuZXh0VmVyc2VUZXh0IiwiX3ZlcnNlQXJyYXk1IiwiZ2V0TmV4dFZlcnNlIiwiQk9PS19DT0xPUlMiLCJfcmVmNSIsIkJ0biIsImNvbG9yIiwibnVtQ2hhcHRlcnMiLCJBcnJheSIsImFwcGx5IiwiTnVtYmVyIiwiX3JlZjYiLCJjaGlsZHJlbiIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwicGFyc2UiLCJnZXRJdGVtIiwiX3VudXNlZCIsImxvY2FsTG9hZCIsIlJlYWN0RE9NIiwicmVuZGVyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLFlBQUEsQ0FBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FYLE9BQUFDLGVBQUFVLEVBQUEsV0FBeUNULFlBQUEsRUFBQUssVUFDekMsRUFBQUUsR0FBQSxpQkFBQUYsRUFBQSxRQUFBTSxLQUFBTixFQUFBckIsRUFBQVUsRUFBQWUs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S0EsRUFBSSxLQUNsRnlGLE1BQUFvQixjQUFDZ0MsRUFBRCxDQUFLQyxNQUFPLE9BQVFwQyxRQUFTVSxHQUE3QixTQUlSLE9BQ0kzQixNQUFBb0IsY0FBQSxPQUFLQyxVQUFVLFVBQ1hyQixNQUFBb0IsY0FBQ2dDLEVBQUQsQ0FBS0MsTUFBTyxVQUFXcEMsUUFBU0EsR0FBaEMsa0JBTWhCLFNBQVNtQyxFQUFUTSxHQUEwQyxJQUEzQkMsRUFBMkJELEVBQTNCQyxTQUFVMUMsRUFBaUJ5QyxFQUFqQnpDLFFBQVNvQyxFQUFRSyxFQUFSTCxNQUM5QixPQUFPckQsTUFBQW9CLGNBQUEsT0FBS3dDLE1BQU8sQ0FBQ0MsZ0JBQWlCUixHQUFRaEMsVUFBVSxTQUFTSixRQUFTQSxHQUFVMEMsR0FZdkYsU0FBU25FLElBQ0wsSUFBSWlCLEVBV1IsU0FBbUIzRSxFQUFLNkUsR0FDcEIsSUFDSSxPQUFPRyxLQUFLZ0QsTUFBTWxELGFBQWFtRCxRQUFRLFlBQ3pDLE1BQUFDLEdBQ0UsT0FBTyxNQWZFQyxHQUliLE9BSGUsT0FBWHhELElBQ0FBLEVBQVMsSUFFTkEsRUFlWHlELFNBQVNDLE9BQ1BuRSxNQUFBb0IsY0FBQ3RDLEVBQUQsQ0FBS2hFLEtBQUssV0FDVnNKLFNBQVNDLGVBQWUiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvZGlzdC9cIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IFwiLi9pbmRleC5zY3NzXCI7XG5cbmNvbnN0IFFVRVNUSU9OU19QRVJfUVVJWiA9IDEwO1xuXG5jb25zdCBCT09LUyA9IFsnR2VuZXNpcycsICdFeG9kdXMnLCAnTGV2aXRpY3VzJywgJ051bWJlcnMnLCAnRGV1dGVyb25vbXknXTtcblxuY29uc3QgQ0hBUFRFUlNfUEVSX0JPT0sgPSBbNTAsIDQwLCAyNywgMzYsIDM0XTtcblxuZnVuY3Rpb24gZ2V0UmFuZG9tVmVyc2UoKSB7XG4gICAgLy8gVE9ETzogcmV2aWV3IHRvIG1ha2Ugc3VyZSB3ZSBkb24ndCBoYXZlIG9mZi1ieS1vbmUgZXJyb3JzXG4gICAgY29uc3QgYm9va0luZGV4ID0gZ2V0UmFuZG9tSW50KFBFTlRBVEVVQ0gubGVuZ3RoKTtcbiAgICBjb25zdCBjaGFwdGVycyA9IFBFTlRBVEVVQ0hbYm9va0luZGV4XS5jaGFwdGVycztcbiAgICBjb25zdCBjaGFwdGVySW5kZXggPSBnZXRSYW5kb21JbnQoY2hhcHRlcnMubGVuZ3RoKTtcbiAgICBjb25zdCB2ZXJzZXMgPSBjaGFwdGVyc1tjaGFwdGVySW5kZXhdLnZlcnNlcztcbiAgICBjb25zdCB2ZXJzZUluZGV4ID0gZ2V0UmFuZG9tSW50KHZlcnNlcy5sZW5ndGgpXG4gICAgcmV0dXJuIFtib29rSW5kZXggKyAxLCBjaGFwdGVySW5kZXggKyAxLCB2ZXJzZUluZGV4ICsgMV1cbn1cblxuZnVuY3Rpb24gdmVyc2VUb0xhYmVsKHZlcnNlQXJyYXkpIHtcbiAgICBsZXQgYm9va051bSwgY2hhcHRlciwgdmVyc2U7XG4gICAgaWYgKHZlcnNlQXJyYXkubGVuZ3RoID09PSAzKSB7XG4gICAgICAgIFtib29rTnVtLCBjaGFwdGVyLCB2ZXJzZV0gPSB2ZXJzZUFycmF5O1xuICAgICAgICByZXR1cm4gYm9va051bVRvTGFiZWwoYm9va051bSkgKyAnICcgKyBjaGFwdGVyICsgJy4nICsgdmVyc2U7XG4gICAgfSBlbHNlIGlmICh2ZXJzZUFycmF5Lmxlbmd0aCA9PT0gMikge1xuICAgICAgICBbYm9va051bSwgY2hhcHRlcl0gPSB2ZXJzZUFycmF5O1xuICAgICAgICByZXR1cm4gYm9va051bVRvTGFiZWwoYm9va051bSkgKyAnICcgKyBjaGFwdGVyO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYm9va051bVRvTGFiZWwoYm9va051bSkge1xuICAgIHJldHVybiBCT09LU1tib29rTnVtIC0gMV07XG59XG5cbmZ1bmN0aW9uIGdldFJhbmRvbUludChtYXgpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogTWF0aC5mbG9vcihtYXgpKTtcbn1cblxuZnVuY3Rpb24gZ2V0UG9pbnRzKGJvb2tDaG9pY2UsIGNoYXB0ZXJDaG9pY2UsIGFuc3dlclZlcnNlQXJyYXkpIHtcbiAgICBsZXQgcG9pbnRzID0gMDtcbiAgICBjb25zdCBbYm9va0Fuc3dlciwgY2hhcHRlckFuc3dlciwgX10gPSBhbnN3ZXJWZXJzZUFycmF5O1xuICAgIGlmIChib29rQ2hvaWNlID09PSBib29rQW5zd2VyKSB7XG4gICAgICAgIHBvaW50cyArPSAxMDtcbiAgICAgICAgY29uc3QgY2hhcHRlcnNPZmYgPSBNYXRoLmFicyhjaGFwdGVyQ2hvaWNlIC0gY2hhcHRlckFuc3dlcik7XG4gICAgICAgIGlmIChjaGFwdGVyc09mZiA9PT0gMCkge1xuICAgICAgICAgICAgcG9pbnRzICs9IDkwO1xuICAgICAgICB9IGVsc2UgaWYgKGNoYXB0ZXJzT2ZmIDw9IDUpIHtcbiAgICAgICAgICAgIHBvaW50cyArPSAoNjAgLSAxMCpjaGFwdGVyc09mZilcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcG9pbnRzO1xufVxuXG5mdW5jdGlvbiBnZXRWZXJzZVRleHQodmVyc2VBcnJheSkge1xuICAgIGNvbnN0IFtib29rTnVtLCBjaGFwdGVyTnVtLCB2ZXJzZU51bV0gPSB2ZXJzZUFycmF5O1xuICAgIGNvbnN0IGJvb2sgPSBQRU5UQVRFVUNIW2Jvb2tOdW0gLSAxXTtcbiAgICBjb25zdCBjaGFwdGVyID0gYm9vay5jaGFwdGVyc1tjaGFwdGVyTnVtIC0gMV1cbiAgICBjb25zdCB2ZXJzZSA9IGNoYXB0ZXIudmVyc2VzW3ZlcnNlTnVtIC0gMV07XG4gICAgaWYgKHZlcnNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZlcnNlW1N0cmluZyh2ZXJzZU51bSldO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZmxhdEFycmF5c0VxdWFsKGEsIGIpIHtcbiAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChhW2ldICE9PSBiW2ldKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cblxuY2xhc3MgQXBwIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBzY29yZTogMCxcbiAgICAgICAgICAgIHF1ZXN0aW9uTnVtOiAwLFxuICAgICAgICAgICAgdmVyc2U6IGdldFJhbmRvbVZlcnNlKCksXG4gICAgICAgICAgICBib29rQ2hvaWNlOiBudWxsLFxuICAgICAgICAgICAgY2hhcHRlckNob2ljZTogbnVsbCxcbiAgICAgICAgICAgIGhpc3Rvcnk6IGxvYWRIaXN0b3J5KCksXG4gICAgICAgICAgICBzaG93SGlzdG9yeTogZmFsc2UsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucGlja0Jvb2sgPSB0aGlzLnBpY2tCb29rLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudW5kb0Jvb2tDaG9pY2UgPSB0aGlzLnVuZG9Cb29rQ2hvaWNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucGlja0NoYXB0ZXIgPSB0aGlzLnBpY2tDaGFwdGVyLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubmV4dFF1ZXN0aW9uID0gdGhpcy5uZXh0UXVlc3Rpb24uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5uZXh0UXVpeiA9IHRoaXMubmV4dFF1aXouYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICBwaWNrQm9vayhib29rQ2hvaWNlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2Jvb2tDaG9pY2V9KTtcbiAgICB9XG5cbiAgICB1bmRvQm9va0Nob2ljZSgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7Ym9va0Nob2ljZTogbnVsbH0pO1xuICAgIH1cblxuICAgIHBpY2tDaGFwdGVyKGNoYXB0ZXJDaG9pY2UpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBvaW50cyA9IGdldFBvaW50cyhzdGF0ZS5ib29rQ2hvaWNlLCBjaGFwdGVyQ2hvaWNlLCBzdGF0ZS52ZXJzZSlcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgY2hhcHRlckNob2ljZSxcbiAgICAgICAgICAgICAgICBxdWVzdGlvbk51bTogc3RhdGUucXVlc3Rpb25OdW0gKyAxLFxuICAgICAgICAgICAgICAgIHNjb3JlOiBzdGF0ZS5zY29yZSArIHBvaW50cyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG5leHRRdWVzdGlvbigpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1N0YXRlID0ge1xuICAgICAgICAgICAgICAgIC4uLnN0YXRlLFxuICAgICAgICAgICAgICAgIHZlcnNlOiBnZXRSYW5kb21WZXJzZSgpLFxuICAgICAgICAgICAgICAgIGJvb2tDaG9pY2U6IG51bGwsXG4gICAgICAgICAgICAgICAgY2hhcHRlckNob2ljZTogbnVsbCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoc3RhdGUucXVlc3Rpb25OdW0gPT09IFFVRVNUSU9OU19QRVJfUVVJWikge1xuICAgICAgICAgICAgICAgIGxldCBkYXRhUG9pbnQgPSByZWNvcmRIaXN0b3JpY2FsU2NvcmUoc3RhdGUuc2NvcmUpO1xuICAgICAgICAgICAgICAgIG5ld1N0YXRlLmhpc3RvcnkucHVzaChkYXRhUG9pbnQpO1xuICAgICAgICAgICAgICAgIG5ld1N0YXRlLnNjb3JlID0gMDtcbiAgICAgICAgICAgICAgICBuZXdTdGF0ZS5xdWVzdGlvbk51bSA9IDA7XG4gICAgICAgICAgICAgICAgbmV3U3RhdGUuc2hvd0hpc3RvcnkgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ld1N0YXRlO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBuZXh0UXVpeigpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2hvd0hpc3Rvcnk6IGZhbHNlfSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7c2NvcmUsIHF1ZXN0aW9uTnVtLCB2ZXJzZSwgYm9va0Nob2ljZSwgY2hhcHRlckNob2ljZSwgc2hvd0hpc3RvcnksIGhpc3Rvcnl9ID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgbGV0IG9uQ2xpY2s7XG4gICAgICAgIGxldCBzaG93QW5zd2VyO1xuICAgICAgICBpZiAoc2hvd0hpc3RvcnkpIHtcbiAgICAgICAgICAgIG9uQ2xpY2sgPSB0aGlzLm5leHRRdWl6O1xuICAgICAgICB9IGVsc2UgaWYgKGJvb2tDaG9pY2UgPT09IG51bGwpIHtcbiAgICAgICAgICAgIG9uQ2xpY2sgPSB0aGlzLnBpY2tCb29rO1xuICAgICAgICAgICAgc2hvd0Fuc3dlciA9IGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKGNoYXB0ZXJDaG9pY2UgPT09IG51bGwpIHtcbiAgICAgICAgICAgIG9uQ2xpY2sgPSB0aGlzLnBpY2tDaGFwdGVyO1xuICAgICAgICAgICAgc2hvd0Fuc3dlciA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb25DbGljayA9IHRoaXMubmV4dFF1ZXN0aW9uO1xuICAgICAgICAgICAgc2hvd0Fuc3dlciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXBwXCI+XG4gICAgICAgICAgICAgICAgPEhlYWRlciBzY29yZT17c2NvcmV9IHF1ZXN0aW9uTnVtPXtxdWVzdGlvbk51bX0gcXVlc3Rpb25zUGVyUXVpej17UVVFU1RJT05TX1BFUl9RVUlafSAvPlxuICAgICAgICAgICAgICAgIHtzaG93SGlzdG9yeSA/XG4gICAgICAgICAgICAgICAgICAgIDxTY29yZUJvZHkgaGlzdG9yeT17aGlzdG9yeX0gLz4gOlxuICAgICAgICAgICAgICAgICAgICA8Qm9keSBzaG93QW5zd2VyPXtzaG93QW5zd2VyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNlPXt2ZXJzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29rQ2hvaWNlPXtib29rQ2hvaWNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXB0ZXJDaG9pY2U9e2NoYXB0ZXJDaG9pY2V9IC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDxGb290ZXIgYm9va0Nob2ljZT17Ym9va0Nob2ljZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXB0ZXJDaG9pY2U9e2NoYXB0ZXJDaG9pY2V9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtvbkNsaWNrfVxuICAgICAgICAgICAgICAgICAgICAgICAgZ29CYWNrPXt0aGlzLnVuZG9Cb29rQ2hvaWNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0hpc3Rvcnk9e3Nob3dIaXN0b3J5fSAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBIZWFkZXIgKHtzY29yZSwgcXVlc3Rpb25OdW0sIHF1ZXN0aW9uc1BlclF1aXp9KSB7XG4gICAgLy8gVE9ETzogZ2V0IGdsb3cgYW5pbWF0aW9uIHRvIHJldHJpZ2dlclxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyXCI+XG4gICAgICAgICAgICA8aDI+UGVudGF0ZXVjaCBRdWl6PC9oMj5cbiAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJnbG93XCI+U0NPUkU6IHtzY29yZX08L2gyPlxuICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cImdsb3dcIj57cXVlc3Rpb25OdW19L3txdWVzdGlvbnNQZXJRdWl6fTwvaDI+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59XG5cblxuZnVuY3Rpb24gQm9keSAoe3Nob3dBbnN3ZXIsIHZlcnNlLCBib29rQ2hvaWNlLCBjaGFwdGVyQ2hvaWNlfSkge1xuICAgIGlmIChzaG93QW5zd2VyKSB7XG4gICAgICAgIGxldCByZXN1bHRMYWJlbDtcbiAgICAgICAgY29uc3QgY2hvaWNlID0gdmVyc2VUb0xhYmVsKFtib29rQ2hvaWNlLCBjaGFwdGVyQ2hvaWNlXSk7XG4gICAgICAgIGNvbnN0IHBvaW50cyA9IGdldFBvaW50cyhib29rQ2hvaWNlLCBjaGFwdGVyQ2hvaWNlLCB2ZXJzZSk7XG4gICAgICAgIGlmICh2ZXJzZVswXSA9PT0gYm9va0Nob2ljZSAmJiB2ZXJzZVsxXSA9PT0gY2hhcHRlckNob2ljZSkge1xuICAgICAgICAgICAgcmVzdWx0TGFiZWwgPSA8cCBjbGFzc05hbWU9XCJib2R5X19jb3JyZWN0XCI+Q09SUkVDVCE8YnIgLz4re3BvaW50c30gcG9pbnRzITwvcD47XG4gICAgICAgIH0gZWxzZSBpZiAodmVyc2VbMF0gPT09IGJvb2tDaG9pY2UpIHtcbiAgICAgICAgICAgIHJlc3VsdExhYmVsID0gPHAgY2xhc3NOYW1lPVwiYm9keV9fY2xvc2VcIj5DbG9zZSwgeW91IGNob3NlIHtjaG9pY2V9LjxiciAvPit7cG9pbnRzfSBwb2ludHM8L3A+O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0TGFiZWwgPSA8cCBjbGFzc05hbWU9XCJib2R5X193cm9uZ1wiPldyb25nLCB5b3UgY2hvc2Uge2Nob2ljZX08L3A+O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvZHlcIj5cbiAgICAgICAgICAgICAgICA8aDI+e3ZlcnNlVG9MYWJlbCh2ZXJzZSl9PC9oMj5cbiAgICAgICAgICAgICAgICA8VmVyc2VzIHZlcnNlQXJyYXk9e3ZlcnNlfSAvPlxuICAgICAgICAgICAgICAgIHtyZXN1bHRMYWJlbH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvZHlcIj5cbiAgICAgICAgICAgICAgICA8VmVyc2VzIHZlcnNlQXJyYXk9e3ZlcnNlfSAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBTY29yZUJvZHkgKHtoaXN0b3J5fSkge1xuICAgIGNvbnN0IHRvcFRlbiA9IFsuLi5oaXN0b3J5XS5zb3J0KGggPT4gLWguc2NvcmUpLmZpbHRlcihoID0+IGguc2NvcmUgPiAwKS5zbGljZSgwLCAxMCk7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJib2R5XCI+XG4gICAgICAgICAgICA8dGFibGU+XG4gICAgICAgICAgICAgICAgPHRoZWFkPlxuICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGg+PC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5TY29yZTwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGg+RGF0ZTwvdGg+XG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgICAgIHt0b3BUZW4ubWFwKChpdGVtLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBrZXk9e2l9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e2kgKyAxfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD57aXRlbS5zY29yZX08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e2l0ZW0uZGF0ZVRpbWVTdHJpbmd9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59XG5cbmZ1bmN0aW9uIFZlcnNlcyh7dmVyc2VBcnJheX0pIHtcbiAgICBjb25zdCBwcmV2VmVyc2VUZXh0ID0gZ2V0UHJldlZlcnNlKHZlcnNlQXJyYXkpO1xuICAgIGNvbnN0IHZlcnNlVGV4dCA9IGdldFZlcnNlVGV4dCh2ZXJzZUFycmF5KTtcbiAgICBjb25zdCBuZXh0VmVyc2VUZXh0ID0gZ2V0TmV4dFZlcnNlKHZlcnNlQXJyYXkpO1xuICAgIHJldHVybiAoXG4gICAgICAgIDxwPlxuICAgICAgICAgICAge3ByZXZWZXJzZVRleHQgPyA8c3BhbiBjbGFzc05hbWU9XCJib2R5X19jb250ZXh0XCI+e3ByZXZWZXJzZVRleHQgKyAnICd9PC9zcGFuPiA6IG51bGx9XG4gICAgICAgICAgICA8c3Bhbj57dmVyc2VUZXh0fTwvc3Bhbj5cbiAgICAgICAgICAgIHtuZXh0VmVyc2VUZXh0ID8gPHNwYW4gY2xhc3NOYW1lPVwiYm9keV9fY29udGV4dFwiPnsnICcgKyBuZXh0VmVyc2VUZXh0fTwvc3Bhbj4gOiBudWxsfVxuICAgICAgICA8L3A+XG4gICAgKTtcbn1cblxuZnVuY3Rpb24gZ2V0UHJldlZlcnNlKHZlcnNlQXJyYXkpIHtcbiAgICBjb25zdCBbYm9va051bSwgY2hhcHRlck51bSwgdmVyc2VOdW1dID0gdmVyc2VBcnJheTtcbiAgICBpZiAodmVyc2VOdW0gPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGdldFZlcnNlVGV4dChbYm9va051bSwgY2hhcHRlck51bSwgdmVyc2VOdW0gLSAxXSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXROZXh0VmVyc2UodmVyc2VBcnJheSkge1xuICAgIGNvbnN0IFtib29rTnVtLCBjaGFwdGVyTnVtLCB2ZXJzZU51bV0gPSB2ZXJzZUFycmF5O1xuICAgIC8vIHJlbGllcyBvbiBgZ2V0VmVyc2VUZXh0YCByZXR1cm4gdW5kZWZpbmVkIGlmIGl0IGlzIHRoZSBsYXN0IHZlcnNlIGluIGEgY2hhcHRlclxuICAgIHJldHVybiBnZXRWZXJzZVRleHQoW2Jvb2tOdW0sIGNoYXB0ZXJOdW0sIHZlcnNlTnVtICsgMV0pIHx8IG51bGw7XG59XG5cbmNvbnN0IEJPT0tfQ09MT1JTID0gWycjRUM2QjM0JywgJyMzQzY0REMnLCAnIzU1QUVFRScsICcjQUU5QkZCJywgJyNGNTlBMkYnXTtcblxuZnVuY3Rpb24gRm9vdGVyICh7Ym9va0Nob2ljZSwgY2hhcHRlckNob2ljZSwgb25DbGljaywgZ29CYWNrLCBzaG93SGlzdG9yeX0pIHtcbiAgICBpZiAoc2hvd0hpc3RvcnkpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9vdGVyXCI+XG4gICAgICAgICAgICAgICAgPEJ0biBjb2xvcj17JyM1RDREQzMnfSBvbkNsaWNrPXtvbkNsaWNrfT5TdGFydCBOZXcgUXVpejwvQnRuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfSBlbHNlIGlmIChib29rQ2hvaWNlID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvb3RlclwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImZvb3Rlcl9faGVscFwiPldoaWNoIGJvb2sgaXMgdGhpcyB2ZXJzZSBmcm9tPzwvcD5cbiAgICAgICAgICAgICAgICA8QnRuIGNvbG9yPXtCT09LX0NPTE9SU1swXX0gb25DbGljaz17KCkgPT4gb25DbGljaygxKX0+R2VuZXNpczwvQnRuPlxuICAgICAgICAgICAgICAgIDxCdG4gY29sb3I9e0JPT0tfQ09MT1JTWzFdfSBvbkNsaWNrPXsoKSA9PiBvbkNsaWNrKDIpfT5FeG9kdXM8L0J0bj5cbiAgICAgICAgICAgICAgICA8QnRuIGNvbG9yPXtCT09LX0NPTE9SU1syXX0gb25DbGljaz17KCkgPT4gb25DbGljaygzKX0+TGV2aXRpY3VzPC9CdG4+XG4gICAgICAgICAgICAgICAgPEJ0biBjb2xvcj17Qk9PS19DT0xPUlNbM119IG9uQ2xpY2s9eygpID0+IG9uQ2xpY2soNCl9Pk51bWJlcnM8L0J0bj5cbiAgICAgICAgICAgICAgICA8QnRuIGNvbG9yPXtCT09LX0NPTE9SU1s0XX0gb25DbGljaz17KCkgPT4gb25DbGljayg1KX0+RGV1dC48L0J0bj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH0gZWxzZSBpZiAoY2hhcHRlckNob2ljZSA9PT0gbnVsbCkge1xuICAgICAgICBjb25zdCBudW1DaGFwdGVycyA9IENIQVBURVJTX1BFUl9CT09LW2Jvb2tDaG9pY2UgLSAxXTtcbiAgICAgICAgY29uc3QgY2hhcHRlcnMgPSBBcnJheS5hcHBseShudWxsLCB7bGVuZ3RoOiBudW1DaGFwdGVyc30pLm1hcChOdW1iZXIuY2FsbCwgTnVtYmVyKTtcbiAgICAgICAgY29uc3QgY29sb3IgPSBCT09LX0NPTE9SU1tib29rQ2hvaWNlIC0gMV07XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvb3RlclwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImZvb3Rlcl9faGVscFwiPkFuZCB3aGljaCBjaGFwdGVyPzwvcD5cbiAgICAgICAgICAgICAgICB7Y2hhcHRlcnMubWFwKGkgPT4gPEJ0biBjb2xvcj17Y29sb3J9IGtleT17aX0gb25DbGljaz17KCkgPT4gb25DbGljayhpICsgMSl9PntpICsgMX08L0J0bj4pfVxuICAgICAgICAgICAgICAgIDxCdG4gY29sb3I9e1wiIzk5OVwifSBvbkNsaWNrPXtnb0JhY2t9PkJhY2s8L0J0bj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvb3RlclwiPlxuICAgICAgICAgICAgICAgIDxCdG4gY29sb3I9eycjNUQ0REMzJ30gb25DbGljaz17b25DbGlja30+TmV4dCBRdWVzdGlvbjwvQnRuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBCdG4gKHtjaGlsZHJlbiwgb25DbGljaywgY29sb3J9KSB7XG4gICAgcmV0dXJuIDxkaXYgc3R5bGU9e3tiYWNrZ3JvdW5kQ29sb3I6IGNvbG9yfX0gY2xhc3NOYW1lPVwiYnV0dG9uXCIgb25DbGljaz17b25DbGlja30+e2NoaWxkcmVufTwvZGl2PlxufVxuXG5mdW5jdGlvbiByZWNvcmRIaXN0b3JpY2FsU2NvcmUoc2NvcmUpIHtcbiAgICBjb25zdCBkYXRlVGltZVN0cmluZyA9IG5ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKTtcbiAgICBjb25zdCBzY29yZXMgPSBsb2FkSGlzdG9yeSgpO1xuICAgIGNvbnN0IGRhdGFQb2ludCA9IHtkYXRlVGltZVN0cmluZywgc2NvcmV9O1xuICAgIHNjb3Jlcy5wdXNoKGRhdGFQb2ludCk7XG4gICAgbG9jYWxTYXZlKCdoaXN0b3J5Jywgc2NvcmVzKTtcbiAgICByZXR1cm4gZGF0YVBvaW50O1xufVxuXG5mdW5jdGlvbiBsb2FkSGlzdG9yeSgpIHtcbiAgICBsZXQgc2NvcmVzID0gbG9jYWxMb2FkKCdoaXN0b3J5Jyk7XG4gICAgaWYgKHNjb3JlcyA9PT0gbnVsbCkge1xuICAgICAgICBzY29yZXMgPSBbXTtcbiAgICB9XG4gICAgcmV0dXJuIHNjb3Jlcztcbn1cblxuZnVuY3Rpb24gbG9jYWxTYXZlKGtleSwgZGF0YSkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xufVxuXG5mdW5jdGlvbiBsb2NhbExvYWQoa2V5LCBkYXRhKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2hpc3RvcnknKSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuUmVhY3RET00ucmVuZGVyKFxuICA8QXBwIG5hbWU9XCJUYXlsb3JcIiAvPixcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcCcpXG4pO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==